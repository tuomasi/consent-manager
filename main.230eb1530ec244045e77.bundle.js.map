{"version":3,"sources":["webpack:///./src/consent-manager/categories.ts","webpack:///./stories/0.1-consent-manager-close-interaction.stories.tsx","webpack:///./stories/1-standalone.stories.tsx","webpack:///./stories/1.1-standalone-custom.stories.tsx","webpack:///./stories/2-category-based.stories.tsx","webpack:///./stories/3-tool-based.stories.tsx","webpack:///./stories/4-custom-consent.stories.tsx","webpack:///./stories/5-custom-categories.stories.tsx","webpack:///./stories/6-ccpa-gdpr-example.stories.tsx","webpack:///./stories/7-default-destination-behavior.stories.tsx","webpack:///./stories/components/CookieView.tsx","webpack:///./src/consent-manager/index.tsx","webpack:///./stories/components/destination-tile.tsx","webpack:///./src/consent-manager-builder/fetch-destinations.ts","webpack:///./src/consent-manager-builder/analytics.ts","webpack:///./src/consent-manager-builder/index.tsx","webpack:///./src/index.ts","webpack:///./src/consent-manager-builder/preferences.ts","webpack:///./stories/standalone.html","webpack:///./stories/standalone-custom.html","webpack:///./stories/ImplyConsentOnInteraction.tsx","webpack:///./src/consent-manager/font-styles.tsx","webpack:///./src/consent-manager/banner.tsx","webpack:///./src/consent-manager/dialog.tsx","webpack:///./src/consent-manager/buttons.tsx","webpack:///./src/consent-manager/preference-dialog.tsx","webpack:///./src/consent-manager/cancel-dialog.tsx","webpack:///./src/consent-manager/container.tsx","webpack:///./.storybook/config.js","webpack:///./stories/components/common-react.tsx","webpack:///./stories sync \\.stories\\.tsx$","webpack:///./stories/0-consent-manager.stories.tsx"],"names":["ADVERTISING_CATEGORIES","FUNCTIONAL_CATEGORIES","withSourceLoader","withSource","__STORY__","__ADDS_MAP__","bannerContent","createElement","href","target","rel","preferencesDialogContent","cancelDialogContent","ConsentManagerExample","writeKey","otherWriteKeys","bannerSubContent","preferencesDialogTitle","cancelDialogTitle","marginX","marginTop","display","src","width","height","frameBorder","onClick","remove","window","location","reload","module","addParameters","storySource","source","locationsMap","addDecorator","add","StandaloneConsentManagerExample","Fragment","style","overflow","flex","srcDoc","language","customStyle","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","Section","props","is","marginBottom","CategoryBased","maxWidth","margin","onError","e","console","error","_a","destinations","preferences","setPreferences","saveConsent","categories","byCategory","onSubmit","handleSubmit","preventDefault","keys","map","cat","destinationsForCategory","key","flexWrap","d","id","destination","JSON","stringify","type","marginRight","ToolBased","initialPreferences","advertising","marketingAndAnalytics","functional","Custom","shouldRequireConsent","useState","prefs","updatePrefs","cleanup","useEffect","closeBehavior","customCategories","integrations","purpose","inCA","inEU","caDefaultPreferences","_categories","undefined","analytics","track","__SOURCE_PREFIX__","__MAIN_FILE_LOCATION__","__MODULE_DEPENDENCIES__","__LOCAL_DEPENDENCIES__","__IDS_TO_FRAMEWORKS__","defaultDestinationBehavior","getJSON","cookieVal","updateCookieVal","clear","setInterval","clearInterval","allCookies","forEach","extendStatics","__extends","b","setPrototypeOf","__proto__","Array","__","constructor","create","zeroValuePreferences","ConsentManager","_super","_this","getInitialPreferences","initialCustomPreferences","category","handleMapCustomPreferences","destinationPreferences","customPreferences","_i","value","preferenceName","entries","categoryName","consentAlreadySetToFalse","includes","_b","_c","customPrefs","_loop_1","find","c","_d","destinations_1","render","implyConsentOnInteraction","cookieDomain","cookieExpires","bannerTextColor","bannerBackgroundColor","cdnHost","mapCustomPreferences","newDestinations","isConsentRequired","resetPreferences","havePreferencesChanged","workspaceAddedNewDestinations","defaultProps","displayName","Destination","elevation","padding","paddingTop","label","website","name","checked","Boolean","onChange","size","description","propTypes","object","isRequired","func","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","adopt","then","__generator","body","f","y","g","_","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","fetchDestinationForWriteKey","res","ok","Error","status","statusText","json","creationName","fetchDestinations","writeKeys","destinationsRequests","writeKeys_1","all","filter","conditionallyLoadAnalytics","shouldReload","categoryPreferences","wd","All","isAnythingEnabled","isEnabled","initialized","middleware","getConsentMiddleware","payload","obj","context","consent","addSourceMiddleware","load","__spreadArrays","il","r","k","a","j","jl","getNewDestinations","ConsentManagerBuilder","state","isLoading","initialise","_e","_f","hasInitialPreferenceToTrue","emptyCustomPreferecences","mapped","_g","values","some","every","setState","handleSetPreferences","newPreferences","prevState","existingPreferences","mergePreferences","handleResetPreferences","handleSaveConsent","custom","args","destinations_2","children","componentDidMount","e_1","COOKIE_KEY","COOKIE_DEFAULT_EXPIRES","loadPreferences","emitter","onPreferencesSaved","listener","on","off","savePreferences","identify","destinationTrackingPreferences","customTrackingPreferences","domain","expires","version","set","emit","ImplyConsentOnInteraction","templateObject_1","templateObject_2","templateObject_3","templateObject_4","templateObject_5","templateObject_6","templateObject_7","templateObject_8","templateObject_9","__makeTemplateObject","cooked","raw","defineProperty","Root","backgroundColor","textColor","Content","CloseButton","Banner","innerRef","onClose","onChangePreferences","content","subContent","title","Overlay","openAnimation","Form","Header","Title","HeaderCancelButton","Buttons","Dialog","handleRootRef","node","root","handleFormRef","form","handleOverlayClick","onCancel","contains","handleEsc","keyCode","titleId","container","document","setAttribute","appendChild","buttons","dialog","role","createPortal","input","querySelector","focus","addEventListener","componentWillUnmount","removeEventListener","removeChild","baseStyles","DefaultButton","GreenButton","RedButton","hideOnMobile","TableScroll","Table","ColumnHeading","RowHeading","Row","InputCell","PreferenceDialog","handleChange","onSave","marketingDestinations","advertisingDestinations","functionalDestinations","scope","className","required","join","CancelDialog","onConfirm","onBack","openDialog","isDialogOpen","toggleDialog","showBanner","toggleBanner","isCancelling","toggleCancel","banner","useRef","preferenceDialog","cancelDialog","normalizeDestinations","handleBodyClick","current","showDialog","removeListener","falsePreferences","reduce","acc","customClosePreferences","configure","require","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","webpackContextKeys","exports"],"mappings":"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","file":"main.230eb1530ec244045e77.bundle.js","sourcesContent":["export var MARKETING_AND_ANALYTICS_CATEGORIES = [\n    'A/B Testing',\n    'Analytics',\n    'Attribution',\n    'Email',\n    'Enrichment',\n    'Heatmaps & Recordings',\n    'Raw Data',\n    'Realtime Dashboards',\n    'Referrals',\n    'Surveys',\n    'Video'\n];\nexport var ADVERTISING_CATEGORIES = ['Advertising', 'Tag Managers'];\nexport var FUNCTIONAL_CATEGORIES = [\n    'CRM',\n    'Customer Success',\n    'Deep Linking',\n    'Helpdesk',\n    'Livechat',\n    'Performance Monitoring',\n    'Personalization',\n    'SMS & Push Notifications',\n    'Security & Fraud'\n];\n","// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/pooya.jaferian/dev/src/github.com/segmentio/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport cookies from 'js-cookie'\\nimport { Pane, Heading, Button } from 'evergreen-ui'\\nimport { ConsentManager, openConsentManager } from '../src'\\nimport { storiesOf } from '@storybook/react'\\nimport { ImplyConsentOnInteraction } from './ImplyConsentOnInteraction'\\nimport CookieView from './components/CookieView'\\n\\nconst bannerContent = (\\n  <span>\\n    We use cookies (and other similar technologies) to collect data to improve your experience on\\n    our site. By using our website, youre agreeing to the collection of data as described in our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </span>\\n)\\nconst bannerSubContent = 'You can manage your preferences here!'\\nconst preferencesDialogTitle = 'Website Data Collection Preferences'\\nconst preferencesDialogContent = (\\n  <div>\\n    <p>\\n      Segment uses data collected by cookies and JavaScript libraries to improve your browsing\\n      experience, analyze site traffic, deliver personalized advertisements, and increase the\\n      overall performance of our site.\\n    </p>\\n    <p>\\n      By using our website, youre agreeing to our{' '}\\n      <a\\n        href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noopener noreferrer\\\"\\n      >\\n        Website Data Collection Policy\\n      </a>\\n      .\\n    </p>\\n    <p>\\n      The table below outlines how we use this data by category. To opt out of a category of data\\n      collection, select No and save your preferences.\\n    </p>\\n  </div>\\n)\\nconst cancelDialogTitle = 'Are you sure you want to cancel?'\\nconst cancelDialogContent = (\\n  <div>\\n    Your preferences have not been saved. By continuing to use our website, youre agreeing to our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </div>\\n)\\n\\nconst ConsentManagerExample = () => {\\n  return (\\n    <Pane>\\n      <ConsentManager\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        otherWriteKeys={['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l']}\\n        bannerContent={bannerContent}\\n        bannerSubContent={bannerSubContent}\\n        preferencesDialogTitle={preferencesDialogTitle}\\n        preferencesDialogContent={preferencesDialogContent}\\n        cancelDialogTitle={cancelDialogTitle}\\n        cancelDialogContent={cancelDialogContent}\\n      />\\n\\n      <Pane marginX={100} marginTop={20}>\\n        <Heading> Your website content </Heading>\\n        <Pane display=\\\"flex\\\">\\n          <iframe\\n            src=\\\"https://giphy.com/embed/JIX9t2j0ZTN9S\\\"\\n            width=\\\"480\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n\\n          <iframe\\n            src=\\\"https://giphy.com/embed/yFQ0ywscgobJK\\\"\\n            width=\\\"398\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n        </Pane>\\n\\n        <p>\\n          <Button onClick={openConsentManager}>Data Collection and Cookie Preferences</Button>\\n        </p>\\n\\n        <p>\\n          <Heading>to see the banner again:</Heading>\\n          <Button\\n            onClick={() => {\\n              cookies.remove('tracking-preferences')\\n              window.location.reload()\\n            }}\\n          >\\n            Clear tracking preferences cookie\\n          </Button>\\n        </p>\\n      </Pane>\\n\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('React Component / Basics', module)\\n  .add(`Basic React Component`, () => <ConsentManagerExample />)\\n  .add(`Basic React Component with implied consent`, () => <ImplyConsentOnInteraction />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/0.1-consent-manager-close-interaction.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport cookies from 'js-cookie';\nimport { Pane, Heading, Button } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager } from '../src';\nimport { storiesOf } from '@storybook/react';\nimport { ImplyConsentOnInteraction } from './ImplyConsentOnInteraction';\nimport CookieView from './components/CookieView';\nvar bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar bannerSubContent = 'You can manage your preferences here!';\nvar preferencesDialogTitle = 'Website Data Collection Preferences';\nvar preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nvar cancelDialogTitle = 'Are you sure you want to cancel?';\nvar cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar ConsentManagerExample = function () {\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'], bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Your website content \"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/JIX9t2j0ZTN9S\", width: \"480\", height: \"480\", frameBorder: \"0\" }),\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(\"p\", null,\n                React.createElement(Button, { onClick: openConsentManager }, \"Data Collection and Cookie Preferences\")),\n            React.createElement(\"p\", null,\n                React.createElement(Heading, null, \"to see the banner again:\"),\n                React.createElement(Button, { onClick: function () {\n                        cookies.remove('tracking-preferences');\n                        window.location.reload();\n                    } }, \"Clear tracking preferences cookie\"))),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('React Component / Basics', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__))\n    .add(\"Basic React Component\", function () { return React.createElement(ConsentManagerExample, null); })\n    .add(\"Basic React Component with implied consent\", function () { return React.createElement(ImplyConsentOnInteraction, null); });\n","// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/pooya.jaferian/dev/src/github.com/segmentio/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { storiesOf } from '@storybook/react'\\nimport { Pane } from 'evergreen-ui'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\n\\n// @ts-ignore\\nimport contents from 'raw-loader!./standalone.html'\\nimport CookieView from './components/CookieView'\\n\\nconst StandaloneConsentManagerExample = () => {\\n  return (\\n    <>\\n      <Pane display=\\\"flex\\\" height=\\\"calc(100vh - 10px)\\\">\\n        <iframe\\n          frameBorder=\\\"0\\\"\\n          style={{ overflow: 'hidden', height: '100%', width: '550px', flex: 1 }}\\n          height=\\\"100%\\\"\\n          width=\\\"550\\\"\\n          srcDoc={contents}\\n        ></iframe>\\n        <SyntaxHighlighter language=\\\"html\\\" style={docco} customStyle={{ flex: 1 }}>\\n          {contents}\\n        </SyntaxHighlighter>\\n      </Pane>\\n\\n      <CookieView />\\n    </>\\n  )\\n}\\n\\nstoriesOf('Standalone / Tag', module).add(`Basic`, () => <StandaloneConsentManagerExample />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/1-standalone.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { Pane } from 'evergreen-ui';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\n// @ts-ignore\nimport contents from 'raw-loader!./standalone.html';\nimport CookieView from './components/CookieView';\nvar StandaloneConsentManagerExample = function () {\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Pane, { display: \"flex\", height: \"calc(100vh - 10px)\" },\n            React.createElement(\"iframe\", { frameBorder: \"0\", style: { overflow: 'hidden', height: '100%', width: '550px', flex: 1 }, height: \"100%\", width: \"550\", srcDoc: contents }),\n            React.createElement(SyntaxHighlighter, { language: \"html\", style: docco, customStyle: { flex: 1 } }, contents)),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Standalone / Tag', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"Basic\", function () { return React.createElement(StandaloneConsentManagerExample, null); });\n","// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/pooya.jaferian/dev/src/github.com/segmentio/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { storiesOf } from '@storybook/react'\\nimport { Pane } from 'evergreen-ui'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\n\\n// @ts-ignore\\nimport contents from 'raw-loader!./standalone-custom.html'\\nimport CookieView from './components/CookieView'\\n\\nconst StandaloneConsentManagerExample = () => {\\n  return (\\n    <>\\n      <Pane display=\\\"flex\\\" height=\\\"calc(100vh - 10px)\\\">\\n        <iframe\\n          frameBorder=\\\"0\\\"\\n          style={{ overflow: 'hidden', height: '100%', width: '550px', flex: 1 }}\\n          height=\\\"100%\\\"\\n          width=\\\"550\\\"\\n          srcDoc={contents}\\n        ></iframe>\\n        <SyntaxHighlighter language=\\\"html\\\" style={docco} customStyle={{ flex: 1 }}>\\n          {contents}\\n        </SyntaxHighlighter>\\n      </Pane>\\n      <CookieView />\\n    </>\\n  )\\n}\\n\\nstoriesOf('Standalone / Javascript', module).add(`with Customization`, () => (\\n  <StandaloneConsentManagerExample />\\n))\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/1.1-standalone-custom.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { Pane } from 'evergreen-ui';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\n// @ts-ignore\nimport contents from 'raw-loader!./standalone-custom.html';\nimport CookieView from './components/CookieView';\nvar StandaloneConsentManagerExample = function () {\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Pane, { display: \"flex\", height: \"calc(100vh - 10px)\" },\n            React.createElement(\"iframe\", { frameBorder: \"0\", style: { overflow: 'hidden', height: '100%', width: '550px', flex: 1 }, height: \"100%\", width: \"550\", srcDoc: contents }),\n            React.createElement(SyntaxHighlighter, { language: \"html\", style: docco, customStyle: { flex: 1 } }, contents)),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Standalone / Javascript', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"with Customization\", function () { return (React.createElement(StandaloneConsentManagerExample, null)); });\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/pooya.jaferian/dev/src/github.com/segmentio/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { groupBy } from 'lodash'\\nimport { Pane, Heading, SubHeading, Ul, Code, Button } from 'evergreen-ui'\\nimport { ConsentManagerBuilder } from '../src'\\nimport DestinationTile from './components/destination-tile'\\nimport { storiesOf } from '@storybook/react'\\nimport CookieView from './components/CookieView'\\n\\nfunction Section(props) {\\n  return <Pane is=\\\"section\\\" marginBottom={24} {...props} />\\n}\\n\\nfunction byCategory(destinations) {\\n  return groupBy(destinations, 'category')\\n}\\n\\nconst CategoryBased = () => {\\n  return (\\n    <Pane maxWidth={1000} margin={30}>\\n      <ConsentManagerBuilder\\n        onError={e => console.error('Error Handling', e)}\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        otherWriteKeys={['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l']}\\n      >\\n        {({ destinations, preferences, setPreferences, saveConsent }) => {\\n          function handleSubmit(e) {\\n            e.preventDefault()\\n            saveConsent()\\n          }\\n\\n          const categories = byCategory(destinations)\\n\\n          return (\\n            <form onSubmit={handleSubmit}>\\n              <Section>\\n                <Heading>ACME Would like to track you with the following tools:</Heading>\\n\\n                {Object.keys(categories).map(cat => {\\n                  const destinationsForCategory = categories[cat]\\n                  return (\\n                    <Pane key={cat} marginTop={20}>\\n                      <SubHeading>{cat}</SubHeading>\\n                      <Ul display=\\\"flex\\\" flexWrap=\\\"wrap\\\">\\n                        {destinationsForCategory.map(d => (\\n                          <DestinationTile\\n                            key={d.id}\\n                            destination={d}\\n                            setPreferences={setPreferences}\\n                            preferences={preferences}\\n                          />\\n                        ))}\\n                      </Ul>\\n                    </Pane>\\n                  )\\n                })}\\n              </Section>\\n\\n              <Section>\\n                <Heading>Preferences</Heading>\\n                <Code>{JSON.stringify(preferences)}</Code>\\n              </Section>\\n\\n              <Button type=\\\"submit\\\" marginRight={8}>\\n                Save\\n              </Button>\\n\\n              <Button type=\\\"button\\\" onClick={() => saveConsent(true)} marginRight={8}>\\n                Allow all\\n              </Button>\\n\\n              <Button type=\\\"button\\\" onClick={() => saveConsent(false)}>\\n                Deny all\\n              </Button>\\n            </form>\\n          )\\n        }}\\n      </ConsentManagerBuilder>\\n\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('ConsentManagerBuilder', module).add(`Category Based`, () => <CategoryBased />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/2-category-based.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { groupBy } from 'lodash';\nimport { Pane, Heading, SubHeading, Ul, Code, Button } from 'evergreen-ui';\nimport { ConsentManagerBuilder } from '../src';\nimport DestinationTile from './components/destination-tile';\nimport { storiesOf } from '@storybook/react';\nimport CookieView from './components/CookieView';\nfunction Section(props) {\n    return React.createElement(Pane, __assign({ is: \"section\", marginBottom: 24 }, props));\n}\nfunction byCategory(destinations) {\n    return groupBy(destinations, 'category');\n}\nvar CategoryBased = function () {\n    return (React.createElement(Pane, { maxWidth: 1000, margin: 30 },\n        React.createElement(ConsentManagerBuilder, { onError: function (e) { return console.error('Error Handling', e); }, writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'] }, function (_a) {\n            var destinations = _a.destinations, preferences = _a.preferences, setPreferences = _a.setPreferences, saveConsent = _a.saveConsent;\n            function handleSubmit(e) {\n                e.preventDefault();\n                saveConsent();\n            }\n            var categories = byCategory(destinations);\n            return (React.createElement(\"form\", { onSubmit: handleSubmit },\n                React.createElement(Section, null,\n                    React.createElement(Heading, null, \"ACME Would like to track you with the following tools:\"),\n                    Object.keys(categories).map(function (cat) {\n                        var destinationsForCategory = categories[cat];\n                        return (React.createElement(Pane, { key: cat, marginTop: 20 },\n                            React.createElement(SubHeading, null, cat),\n                            React.createElement(Ul, { display: \"flex\", flexWrap: \"wrap\" }, destinationsForCategory.map(function (d) { return (React.createElement(DestinationTile, { key: d.id, destination: d, setPreferences: setPreferences, preferences: preferences })); }))));\n                    })),\n                React.createElement(Section, null,\n                    React.createElement(Heading, null, \"Preferences\"),\n                    React.createElement(Code, null, JSON.stringify(preferences))),\n                React.createElement(Button, { type: \"submit\", marginRight: 8 }, \"Save\"),\n                React.createElement(Button, { type: \"button\", onClick: function () { return saveConsent(true); }, marginRight: 8 }, \"Allow all\"),\n                React.createElement(Button, { type: \"button\", onClick: function () { return saveConsent(false); } }, \"Deny all\")));\n        }),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('ConsentManagerBuilder', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"Category Based\", function () { return React.createElement(CategoryBased, null); });\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/pooya.jaferian/dev/src/github.com/segmentio/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { Pane, Heading, SubHeading, Ul, Code, Button } from 'evergreen-ui'\\nimport { ConsentManagerBuilder } from '../src'\\nimport DestinationTile from './components/destination-tile'\\nimport { storiesOf } from '@storybook/react'\\nimport CookieView from './components/CookieView'\\n\\nfunction Section(props) {\\n  return <Pane is=\\\"section\\\" marginBottom={24} {...props} />\\n}\\n\\nconst ToolBased = () => {\\n  return (\\n    <Pane maxWidth={1000} margin={30}>\\n      <ConsentManagerBuilder\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        otherWriteKeys={['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l']}\\n      >\\n        {({ destinations, preferences, setPreferences, saveConsent }) => {\\n          function handleSubmit(e) {\\n            e.preventDefault()\\n            saveConsent()\\n          }\\n\\n          return (\\n            <form onSubmit={handleSubmit}>\\n              <Section>\\n                <Heading>ACME Would like to track you with the following tools:</Heading>\\n                <Ul display=\\\"flex\\\" flexWrap=\\\"wrap\\\">\\n                  {destinations.map(d => (\\n                    <DestinationTile\\n                      key={d.id}\\n                      destination={d}\\n                      setPreferences={setPreferences}\\n                      preferences={preferences}\\n                    />\\n                  ))}\\n                </Ul>\\n              </Section>\\n\\n              <Section>\\n                <SubHeading>Preferences</SubHeading>\\n                <Code>{JSON.stringify(preferences)}</Code>\\n              </Section>\\n\\n              <Button type=\\\"submit\\\" marginRight={8}>\\n                Save\\n              </Button>\\n\\n              <Button type=\\\"button\\\" onClick={() => saveConsent(true)} marginRight={8}>\\n                Allow all\\n              </Button>\\n\\n              <Button type=\\\"button\\\" onClick={() => saveConsent(false)}>\\n                Deny all\\n              </Button>\\n            </form>\\n          )\\n        }}\\n      </ConsentManagerBuilder>\\n\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('ConsentManagerBuilder', module).add(`Tool Based`, () => <ToolBased />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/3-tool-based.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { Pane, Heading, SubHeading, Ul, Code, Button } from 'evergreen-ui';\nimport { ConsentManagerBuilder } from '../src';\nimport DestinationTile from './components/destination-tile';\nimport { storiesOf } from '@storybook/react';\nimport CookieView from './components/CookieView';\nfunction Section(props) {\n    return React.createElement(Pane, __assign({ is: \"section\", marginBottom: 24 }, props));\n}\nvar ToolBased = function () {\n    return (React.createElement(Pane, { maxWidth: 1000, margin: 30 },\n        React.createElement(ConsentManagerBuilder, { writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'] }, function (_a) {\n            var destinations = _a.destinations, preferences = _a.preferences, setPreferences = _a.setPreferences, saveConsent = _a.saveConsent;\n            function handleSubmit(e) {\n                e.preventDefault();\n                saveConsent();\n            }\n            return (React.createElement(\"form\", { onSubmit: handleSubmit },\n                React.createElement(Section, null,\n                    React.createElement(Heading, null, \"ACME Would like to track you with the following tools:\"),\n                    React.createElement(Ul, { display: \"flex\", flexWrap: \"wrap\" }, destinations.map(function (d) { return (React.createElement(DestinationTile, { key: d.id, destination: d, setPreferences: setPreferences, preferences: preferences })); }))),\n                React.createElement(Section, null,\n                    React.createElement(SubHeading, null, \"Preferences\"),\n                    React.createElement(Code, null, JSON.stringify(preferences))),\n                React.createElement(Button, { type: \"submit\", marginRight: 8 }, \"Save\"),\n                React.createElement(Button, { type: \"button\", onClick: function () { return saveConsent(true); }, marginRight: 8 }, \"Allow all\"),\n                React.createElement(Button, { type: \"button\", onClick: function () { return saveConsent(false); } }, \"Deny all\")));\n        }),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('ConsentManagerBuilder', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"Tool Based\", function () { return React.createElement(ToolBased, null); });\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/pooya.jaferian/dev/src/github.com/segmentio/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { Pane, Button } from 'evergreen-ui'\\nimport { storiesOf } from '@storybook/react'\\nimport ConsentManager from '../src/consent-manager'\\nimport * as common from './components/common-react'\\nimport { openConsentManager } from '../src'\\nimport CookieView from './components/CookieView'\\n\\nconst initialPreferences = {\\n  advertising: false,\\n  marketingAndAnalytics: true,\\n  functional: true\\n}\\n\\nconst Custom = () => {\\n  return (\\n    <Pane maxWidth={1000} margin={30}>\\n      <ConsentManager\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        initialPreferences={initialPreferences}\\n        shouldRequireConsent={() => true}\\n        {...common}\\n      />\\n\\n      <Button marginRight={20} onClick={openConsentManager}>\\n        Change Cookie Preferences\\n      </Button>\\n\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('Advanced Use Cases', module).add(`Partial consent`, () => <Custom />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/4-custom-consent.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { Pane, Button } from 'evergreen-ui';\nimport { storiesOf } from '@storybook/react';\nimport ConsentManager from '../src/consent-manager';\nimport * as common from './components/common-react';\nimport { openConsentManager } from '../src';\nimport CookieView from './components/CookieView';\nvar initialPreferences = {\n    advertising: false,\n    marketingAndAnalytics: true,\n    functional: true\n};\nvar Custom = function () {\n    return (React.createElement(Pane, { maxWidth: 1000, margin: 30 },\n        React.createElement(ConsentManager, __assign({ writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", initialPreferences: initialPreferences, shouldRequireConsent: function () { return true; } }, common)),\n        React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Advanced Use Cases', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"Partial consent\", function () { return React.createElement(Custom, null); });\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/pooya.jaferian/dev/src/github.com/segmentio/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport cookies from 'js-cookie'\\nimport { Pane, Heading, Button } from 'evergreen-ui'\\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src'\\nimport { storiesOf } from '@storybook/react'\\nimport { CloseBehavior, CloseBehaviorFunction } from '../src/consent-manager/container'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { Preferences } from '../src/types'\\nimport CookieView from './components/CookieView'\\n\\nconst bannerContent = (\\n  <span>\\n    We use cookies (and other similar technologies) to collect data to improve your experience on\\n    our site. By using our website, youre agreeing to the collection of data as described in our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </span>\\n)\\nconst bannerSubContent = 'You can manage your preferences here!'\\nconst preferencesDialogTitle = 'Website Data Collection Preferences'\\nconst preferencesDialogContent = (\\n  <div>\\n    <p>\\n      Segment uses data collected by cookies and JavaScript libraries to improve your browsing\\n      experience, analyze site traffic, deliver personalized advertisements, and increase the\\n      overall performance of our site.\\n    </p>\\n    <p>\\n      By using our website, youre agreeing to our{' '}\\n      <a\\n        href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noopener noreferrer\\\"\\n      >\\n        Website Data Collection Policy\\n      </a>\\n      .\\n    </p>\\n    <p>\\n      The table below outlines how we use this data by category. To opt out of a category of data\\n      collection, select No and save your preferences.\\n    </p>\\n  </div>\\n)\\nconst cancelDialogTitle = 'Are you sure you want to cancel?'\\nconst cancelDialogContent = (\\n  <div>\\n    Your preferences have not been saved. By continuing to use our website, youre agreeing to our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </div>\\n)\\n\\nconst ConsentManagerExample = (props: { closeBehavior: CloseBehavior | CloseBehaviorFunction }) => {\\n  const [prefs, updatePrefs] = React.useState<Preferences>(loadPreferences())\\n\\n  const cleanup = onPreferencesSaved(preferences => {\\n    updatePrefs(preferences)\\n  })\\n\\n  React.useEffect(() => {\\n    return () => {\\n      cleanup()\\n    }\\n  })\\n\\n  return (\\n    <Pane>\\n      <ConsentManager\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        otherWriteKeys={['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l']}\\n        bannerContent={bannerContent}\\n        bannerSubContent={bannerSubContent}\\n        preferencesDialogTitle={preferencesDialogTitle}\\n        preferencesDialogContent={preferencesDialogContent}\\n        cancelDialogTitle={cancelDialogTitle}\\n        cancelDialogContent={cancelDialogContent}\\n        closeBehavior={props.closeBehavior}\\n        customCategories={{\\n          'Do Not Sell': {\\n            integrations: ['AdWords'],\\n            purpose: 'To give the right to opt out of the sale of personal data.'\\n          }\\n        }}\\n      />\\n\\n      <Pane marginX={100} marginTop={20}>\\n        <Heading> Cute Cats </Heading>\\n        <Pane display=\\\"flex\\\">\\n          <iframe\\n            src=\\\"https://giphy.com/embed/JIX9t2j0ZTN9S\\\"\\n            width=\\\"480\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n\\n          <iframe\\n            src=\\\"https://giphy.com/embed/yFQ0ywscgobJK\\\"\\n            width=\\\"398\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n        </Pane>\\n\\n        <p>\\n          <div>\\n            <Heading>Current Preferences</Heading>\\n            <SyntaxHighlighter language=\\\"json\\\" style={docco}>\\n              {JSON.stringify(prefs, null, 2)}\\n            </SyntaxHighlighter>\\n          </div>\\n          <Button marginRight={20} onClick={openConsentManager}>\\n            Change Cookie Preferences\\n          </Button>\\n          <Button\\n            onClick={() => {\\n              cookies.remove('tracking-preferences')\\n              window.location.reload()\\n            }}\\n          >\\n            Clear\\n          </Button>\\n        </p>\\n      </Pane>\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('Custom Categories - Do Not Sell', module)\\n  .add(`Dismiss`, () => <ConsentManagerExample closeBehavior={CloseBehavior.DISMISS} />)\\n  .add(`Accept`, () => <ConsentManagerExample closeBehavior={CloseBehavior.ACCEPT} />)\\n  .add(`Deny`, () => <ConsentManagerExample closeBehavior={CloseBehavior.DENY} />)\\n  .add(`Custom Close Behavior`, () => (\\n    <ConsentManagerExample\\n      closeBehavior={categories => ({\\n        ...categories,\\n        'Do Not Sell': false\\n      })}\\n    />\\n  ))\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/5-custom-categories.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport cookies from 'js-cookie';\nimport { Pane, Heading, Button } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src';\nimport { storiesOf } from '@storybook/react';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport CookieView from './components/CookieView';\nvar bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar bannerSubContent = 'You can manage your preferences here!';\nvar preferencesDialogTitle = 'Website Data Collection Preferences';\nvar preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nvar cancelDialogTitle = 'Are you sure you want to cancel?';\nvar cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar ConsentManagerExample = function (props) {\n    var _a = React.useState(loadPreferences()), prefs = _a[0], updatePrefs = _a[1];\n    var cleanup = onPreferencesSaved(function (preferences) {\n        updatePrefs(preferences);\n    });\n    React.useEffect(function () {\n        return function () {\n            cleanup();\n        };\n    });\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'], bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, closeBehavior: props.closeBehavior, customCategories: {\n                'Do Not Sell': {\n                    integrations: ['AdWords'],\n                    purpose: 'To give the right to opt out of the sale of personal data.'\n                }\n            } }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Cute Cats \"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/JIX9t2j0ZTN9S\", width: \"480\", height: \"480\", frameBorder: \"0\" }),\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(\"p\", null,\n                React.createElement(\"div\", null,\n                    React.createElement(Heading, null, \"Current Preferences\"),\n                    React.createElement(SyntaxHighlighter, { language: \"json\", style: docco }, JSON.stringify(prefs, null, 2))),\n                React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n                React.createElement(Button, { onClick: function () {\n                        cookies.remove('tracking-preferences');\n                        window.location.reload();\n                    } }, \"Clear\"))),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Custom Categories - Do Not Sell', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__))\n    .add(\"Dismiss\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"dismiss\" /* DISMISS */ }); })\n    .add(\"Accept\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"accept\" /* ACCEPT */ }); })\n    .add(\"Deny\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"deny\" /* DENY */ }); })\n    .add(\"Custom Close Behavior\", function () { return (React.createElement(ConsentManagerExample, { closeBehavior: function (categories) { return (__assign(__assign({}, categories), { 'Do Not Sell': false })); } })); });\n","// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/pooya.jaferian/dev/src/github.com/segmentio/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport cookies from 'js-cookie'\\nimport { Pane, Heading, Paragraph, Button } from 'evergreen-ui'\\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src'\\nimport { storiesOf } from '@storybook/react'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { Preferences } from '../src/types'\\nimport CookieView from './components/CookieView'\\nimport inRegions from '@segment/in-regions'\\nimport { CloseBehavior } from '../src/consent-manager/container'\\n\\nconst bannerContent = (\\n  <span>\\n    We use cookies (and other similar technologies) to collect data to improve your experience on\\n    our site. By using our website, youre agreeing to the collection of data as described in our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </span>\\n)\\nconst bannerSubContent = 'You can manage your preferences here!'\\nconst preferencesDialogTitle = 'Website Data Collection Preferences'\\nconst preferencesDialogContent = (\\n  <div>\\n    <p>\\n      Segment uses data collected by cookies and JavaScript libraries to improve your browsing\\n      experience, analyze site traffic, deliver personalized advertisements, and increase the\\n      overall performance of our site.\\n    </p>\\n    <p>\\n      By using our website, youre agreeing to our{' '}\\n      <a\\n        href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noopener noreferrer\\\"\\n      >\\n        Website Data Collection Policy\\n      </a>\\n      .\\n    </p>\\n    <p>\\n      The table below outlines how we use this data by category. To opt out of a category of data\\n      collection, select No and save your preferences.\\n    </p>\\n  </div>\\n)\\nconst cancelDialogTitle = 'Are you sure you want to cancel?'\\nconst cancelDialogContent = (\\n  <div>\\n    Your preferences have not been saved. By continuing to use our website, youre agreeing to our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </div>\\n)\\n\\nconst ConsentManagerExample = () => {\\n  const [prefs, updatePrefs] = React.useState<Preferences>(loadPreferences())\\n\\n  const cleanup = onPreferencesSaved(preferences => {\\n    updatePrefs(preferences)\\n  })\\n\\n  React.useEffect(() => {\\n    return () => {\\n      cleanup()\\n    }\\n  })\\n\\n  const inCA = inRegions(['CA'])\\n  const inEU = inRegions(['EU'])\\n  const shouldRequireConsent = inRegions(['CA', 'EU'])\\n  const caDefaultPreferences = {\\n    advertising: false,\\n    marketingAndAnalytics: true,\\n    functional: true\\n  }\\n  const euDefaultPreferences = {\\n    advertising: false,\\n    marketingAndAnalytics: false,\\n    functional: false\\n  }\\n\\n  const closeBehavior = inCA()\\n    ? _categories => caDefaultPreferences\\n    : inEU()\\n      ? CloseBehavior.DENY\\n      : CloseBehavior.ACCEPT\\n\\n  const initialPreferences = inCA()\\n    ? caDefaultPreferences\\n    : inEU()\\n      ? euDefaultPreferences\\n      : undefined\\n\\n  return (\\n    <Pane>\\n      <ConsentManager\\n        writeKey=\\\"n2DAIaakJzCUq0saLY0LMcm9dKsqCZvU\\\"\\n        bannerContent={bannerContent}\\n        bannerSubContent={bannerSubContent}\\n        preferencesDialogTitle={preferencesDialogTitle}\\n        preferencesDialogContent={preferencesDialogContent}\\n        cancelDialogTitle={cancelDialogTitle}\\n        cancelDialogContent={cancelDialogContent}\\n        closeBehavior={closeBehavior}\\n        shouldRequireConsent={shouldRequireConsent}\\n        initialPreferences={initialPreferences}\\n      />\\n\\n      <Pane marginX={100} marginTop={20}>\\n        <Heading> Cute Cats </Heading>\\n        <Pane display=\\\"flex\\\">\\n          <iframe\\n            src=\\\"https://giphy.com/embed/JIX9t2j0ZTN9S\\\"\\n            width=\\\"480\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n\\n          <iframe\\n            src=\\\"https://giphy.com/embed/yFQ0ywscgobJK\\\"\\n            width=\\\"398\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n        </Pane>\\n        <Button onClick={() => window.analytics.track('Send Track Event Clicked')}>\\n          Send Track Event\\n        </Button>\\n\\n        <Paragraph marginTop={20}>\\n          This example highlights checking for EU or CA residency, then changing the closeBehavior\\n          based on membership in each.\\n        </Paragraph>\\n        <p>\\n          <div>\\n            <Heading>Current Preferences</Heading>\\n            <SyntaxHighlighter language=\\\"json\\\" style={docco}>\\n              {JSON.stringify(prefs, null, 2)}\\n            </SyntaxHighlighter>\\n          </div>\\n          <Button marginRight={20} onClick={openConsentManager}>\\n            Change Cookie Preferences\\n          </Button>\\n          <Button\\n            onClick={() => {\\n              cookies.remove('tracking-preferences')\\n              window.location.reload()\\n            }}\\n          >\\n            Clear\\n          </Button>\\n        </p>\\n      </Pane>\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('CCPA + GDPR Example', module).add(`Basic`, () => <ConsentManagerExample />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/6-ccpa-gdpr-example.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport cookies from 'js-cookie';\nimport { Pane, Heading, Paragraph, Button } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src';\nimport { storiesOf } from '@storybook/react';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport CookieView from './components/CookieView';\nimport inRegions from '@segment/in-regions';\nvar bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar bannerSubContent = 'You can manage your preferences here!';\nvar preferencesDialogTitle = 'Website Data Collection Preferences';\nvar preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nvar cancelDialogTitle = 'Are you sure you want to cancel?';\nvar cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar ConsentManagerExample = function () {\n    var _a = React.useState(loadPreferences()), prefs = _a[0], updatePrefs = _a[1];\n    var cleanup = onPreferencesSaved(function (preferences) {\n        updatePrefs(preferences);\n    });\n    React.useEffect(function () {\n        return function () {\n            cleanup();\n        };\n    });\n    var inCA = inRegions(['CA']);\n    var inEU = inRegions(['EU']);\n    var shouldRequireConsent = inRegions(['CA', 'EU']);\n    var caDefaultPreferences = {\n        advertising: false,\n        marketingAndAnalytics: true,\n        functional: true\n    };\n    var euDefaultPreferences = {\n        advertising: false,\n        marketingAndAnalytics: false,\n        functional: false\n    };\n    var closeBehavior = inCA()\n        ? function (_categories) { return caDefaultPreferences; }\n        : inEU()\n            ? \"deny\" /* DENY */\n            : \"accept\" /* ACCEPT */;\n    var initialPreferences = inCA()\n        ? caDefaultPreferences\n        : inEU()\n            ? euDefaultPreferences\n            : undefined;\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"n2DAIaakJzCUq0saLY0LMcm9dKsqCZvU\", bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, closeBehavior: closeBehavior, shouldRequireConsent: shouldRequireConsent, initialPreferences: initialPreferences }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Cute Cats \"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/JIX9t2j0ZTN9S\", width: \"480\", height: \"480\", frameBorder: \"0\" }),\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(Button, { onClick: function () { return window.analytics.track('Send Track Event Clicked'); } }, \"Send Track Event\"),\n            React.createElement(Paragraph, { marginTop: 20 }, \"This example highlights checking for EU or CA residency, then changing the closeBehavior based on membership in each.\"),\n            React.createElement(\"p\", null,\n                React.createElement(\"div\", null,\n                    React.createElement(Heading, null, \"Current Preferences\"),\n                    React.createElement(SyntaxHighlighter, { language: \"json\", style: docco }, JSON.stringify(prefs, null, 2))),\n                React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n                React.createElement(Button, { onClick: function () {\n                        cookies.remove('tracking-preferences');\n                        window.location.reload();\n                    } }, \"Clear\"))),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('CCPA + GDPR Example', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"Basic\", function () { return React.createElement(ConsentManagerExample, null); });\n","// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/pooya.jaferian/dev/src/github.com/segmentio/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { Pane, Heading, Paragraph, Button } from 'evergreen-ui'\\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src'\\nimport { storiesOf } from '@storybook/react'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { Preferences, DefaultDestinationBehavior } from '../src/types'\\nimport CookieView from './components/CookieView'\\nimport { CloseBehavior } from '../src/consent-manager/container'\\n\\nconst bannerContent = (\\n  <span>\\n    We use cookies (and other similar technologies) to collect data to improve your experience on\\n    our site. By using our website, youre agreeing to the collection of data as described in our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </span>\\n)\\nconst bannerSubContent = 'You can manage your preferences here!'\\nconst preferencesDialogTitle = 'Website Data Collection Preferences'\\nconst preferencesDialogContent = (\\n  <div>\\n    <p>\\n      Segment uses data collected by cookies and JavaScript libraries to improve your browsing\\n      experience, analyze site traffic, deliver personalized advertisements, and increase the\\n      overall performance of our site.\\n    </p>\\n    <p>\\n      By using our website, youre agreeing to our{' '}\\n      <a\\n        href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noopener noreferrer\\\"\\n      >\\n        Website Data Collection Policy\\n      </a>\\n      .\\n    </p>\\n    <p>\\n      The table below outlines how we use this data by category. To opt out of a category of data\\n      collection, select No and save your preferences.\\n    </p>\\n  </div>\\n)\\nconst cancelDialogTitle = 'Are you sure you want to cancel?'\\nconst cancelDialogContent = (\\n  <div>\\n    Your preferences have not been saved. By continuing to use our website, youre agreeing to our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </div>\\n)\\n\\nconst ConsentManagerExample = (props: {\\n  defaultDestinationBehavior: DefaultDestinationBehavior\\n}) => {\\n  const [prefs, updatePrefs] = React.useState<Preferences>(loadPreferences())\\n\\n  const cleanup = onPreferencesSaved(preferences => {\\n    updatePrefs(preferences)\\n  })\\n\\n  React.useEffect(() => {\\n    return () => {\\n      cleanup()\\n    }\\n  })\\n\\n  return (\\n    <Pane>\\n      <ConsentManager\\n        writeKey=\\\"VeSvGsFntmbyoQ3wh9FJphKGpPNW2paD\\\"\\n        otherWriteKeys={[]}\\n        bannerContent={bannerContent}\\n        bannerSubContent={bannerSubContent}\\n        preferencesDialogTitle={preferencesDialogTitle}\\n        preferencesDialogContent={preferencesDialogContent}\\n        cancelDialogTitle={cancelDialogTitle}\\n        cancelDialogContent={cancelDialogContent}\\n        closeBehavior={CloseBehavior.ACCEPT}\\n        defaultDestinationBehavior={props.defaultDestinationBehavior}\\n      />\\n\\n      <Pane marginX={100} marginTop={20}>\\n        <Heading> Cute Cats </Heading>\\n        <Pane display=\\\"flex\\\">\\n          <iframe\\n            src=\\\"https://giphy.com/embed/JIX9t2j0ZTN9S\\\"\\n            width=\\\"480\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n\\n          <iframe\\n            src=\\\"https://giphy.com/embed/yFQ0ywscgobJK\\\"\\n            width=\\\"398\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n        </Pane>\\n\\n        <Paragraph marginTop={20}>\\n          This example highlights default destination behavior. The cookie set is missing a\\n          destination that is enabled on the source, imitating a newly added destination. In the\\n          console, verify behavior by looking at analytics.options.\\n        </Paragraph>\\n        <p>\\n          <div>\\n            <Heading>Current Preferences</Heading>\\n            <SyntaxHighlighter language=\\\"json\\\" style={docco}>\\n              {JSON.stringify(prefs, null, 2)}\\n            </SyntaxHighlighter>\\n          </div>\\n          <Button marginRight={20} onClick={openConsentManager}>\\n            Change Cookie Preferences\\n          </Button>\\n          <Button\\n            onClick={() => {\\n              window.location.reload()\\n            }}\\n          >\\n            Reset Example\\n          </Button>\\n        </p>\\n      </Pane>\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('Default Destination Behavior', module).add(`disable`, () => (\\n  <ConsentManagerExample defaultDestinationBehavior=\\\"disable\\\" />\\n))\\nstoriesOf('Default Destination Behavior', module).add(`enable`, () => (\\n  <ConsentManagerExample defaultDestinationBehavior=\\\"enable\\\" />\\n))\\nstoriesOf('Default Destination Behavior', module).add(`imply`, () => (\\n  <ConsentManagerExample defaultDestinationBehavior=\\\"imply\\\" />\\n))\\nstoriesOf('Default Destination Behavior', module).add(`ask`, () => (\\n  <ConsentManagerExample defaultDestinationBehavior=\\\"ask\\\" />\\n))\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/7-default-destination-behavior.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { Pane, Heading, Paragraph, Button } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src';\nimport { storiesOf } from '@storybook/react';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport CookieView from './components/CookieView';\nvar bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar bannerSubContent = 'You can manage your preferences here!';\nvar preferencesDialogTitle = 'Website Data Collection Preferences';\nvar preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nvar cancelDialogTitle = 'Are you sure you want to cancel?';\nvar cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar ConsentManagerExample = function (props) {\n    var _a = React.useState(loadPreferences()), prefs = _a[0], updatePrefs = _a[1];\n    var cleanup = onPreferencesSaved(function (preferences) {\n        updatePrefs(preferences);\n    });\n    React.useEffect(function () {\n        return function () {\n            cleanup();\n        };\n    });\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"VeSvGsFntmbyoQ3wh9FJphKGpPNW2paD\", otherWriteKeys: [], bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, closeBehavior: \"accept\" /* ACCEPT */, defaultDestinationBehavior: props.defaultDestinationBehavior }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Cute Cats \"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/JIX9t2j0ZTN9S\", width: \"480\", height: \"480\", frameBorder: \"0\" }),\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(Paragraph, { marginTop: 20 }, \"This example highlights default destination behavior. The cookie set is missing a destination that is enabled on the source, imitating a newly added destination. In the console, verify behavior by looking at analytics.options.\"),\n            React.createElement(\"p\", null,\n                React.createElement(\"div\", null,\n                    React.createElement(Heading, null, \"Current Preferences\"),\n                    React.createElement(SyntaxHighlighter, { language: \"json\", style: docco }, JSON.stringify(prefs, null, 2))),\n                React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n                React.createElement(Button, { onClick: function () {\n                        window.location.reload();\n                    } }, \"Reset Example\"))),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Default Destination Behavior', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"disable\", function () { return (React.createElement(ConsentManagerExample, { defaultDestinationBehavior: \"disable\" })); });\nstoriesOf('Default Destination Behavior', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"enable\", function () { return (React.createElement(ConsentManagerExample, { defaultDestinationBehavior: \"enable\" })); });\nstoriesOf('Default Destination Behavior', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"imply\", function () { return (React.createElement(ConsentManagerExample, { defaultDestinationBehavior: \"imply\" })); });\nstoriesOf('Default Destination Behavior', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"ask\", function () { return (React.createElement(ConsentManagerExample, { defaultDestinationBehavior: \"ask\" })); });\n","import React, { useEffect, useState } from 'react';\nimport { Pane, Heading, Button } from 'evergreen-ui';\nimport cookies from 'js-cookie';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nvar CookieView = function () {\n    var _a = useState(cookies.getJSON()), cookieVal = _a[0], updateCookieVal = _a[1];\n    useEffect(function () {\n        var clear = setInterval(function () {\n            updateCookieVal(cookies.getJSON());\n        }, 1000);\n        return function () { return clearInterval(clear); };\n    });\n    return (React.createElement(Pane, { marginTop: 30 },\n        React.createElement(Heading, null, \"Cookies:\"),\n        React.createElement(SyntaxHighlighter, { language: \"json\", style: docco }, JSON.stringify(cookieVal, null, 2)),\n        React.createElement(Button, { onClick: function () {\n                var allCookies = cookies.getJSON();\n                Object.keys(allCookies).forEach(function (key) {\n                    cookies.remove(key);\n                });\n                window.location.reload();\n            } }, \"Clear \\uD83E\\uDDF9\\uD83C\\uDF6A\")));\n};\nexport default CookieView;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { PureComponent } from 'react';\nimport ConsentManagerBuilder from '../consent-manager-builder';\nimport Container from './container';\nimport { ADVERTISING_CATEGORIES, FUNCTIONAL_CATEGORIES } from './categories';\nvar zeroValuePreferences = {\n    marketingAndAnalytics: null,\n    advertising: null,\n    functional: null\n};\nvar ConsentManager = /** @class */ (function (_super) {\n    __extends(ConsentManager, _super);\n    function ConsentManager() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.getInitialPreferences = function () {\n            var _a = _this.props, initialPreferences = _a.initialPreferences, customCategories = _a.customCategories;\n            if (initialPreferences) {\n                return initialPreferences;\n            }\n            if (!customCategories) {\n                return zeroValuePreferences;\n            }\n            var initialCustomPreferences = {};\n            Object.keys(customCategories).forEach(function (category) {\n                initialCustomPreferences[category] = null;\n            });\n            return initialCustomPreferences;\n        };\n        _this.handleMapCustomPreferences = function (destinations, preferences) {\n            var customCategories = _this.props.customCategories;\n            var destinationPreferences = {};\n            var customPreferences = {};\n            if (customCategories) {\n                for (var _i = 0, _a = Object.keys(customCategories); _i < _a.length; _i++) {\n                    var preferenceName = _a[_i];\n                    var value = preferences[preferenceName];\n                    if (typeof value === 'boolean') {\n                        customPreferences[preferenceName] = value;\n                    }\n                    else {\n                        customPreferences[preferenceName] = true;\n                    }\n                }\n                destinations.forEach(function (destination) {\n                    // Mark custom categories\n                    Object.entries(customCategories).forEach(function (_a) {\n                        var categoryName = _a[0], integrations = _a[1].integrations;\n                        var consentAlreadySetToFalse = destinationPreferences[destination.id] === false;\n                        var shouldSetConsent = integrations.includes(destination.id);\n                        if (shouldSetConsent && !consentAlreadySetToFalse) {\n                            destinationPreferences[destination.id] = customPreferences[categoryName];\n                        }\n                    });\n                });\n                return { destinationPreferences: destinationPreferences, customPreferences: customPreferences };\n            }\n            // Default unset preferences to true (for implicit consent)\n            for (var _b = 0, _c = Object.keys(preferences); _b < _c.length; _b++) {\n                var preferenceName = _c[_b];\n                var value = preferences[preferenceName];\n                if (typeof value === 'boolean') {\n                    customPreferences[preferenceName] = value;\n                }\n                else {\n                    customPreferences[preferenceName] = true;\n                }\n            }\n            var customPrefs = customPreferences;\n            var _loop_1 = function (destination) {\n                // Mark advertising destinations\n                if (ADVERTISING_CATEGORIES.find(function (c) { return c === destination.category; }) &&\n                    destinationPreferences[destination.id] !== false) {\n                    destinationPreferences[destination.id] = customPrefs.advertising;\n                }\n                // Mark function destinations\n                if (FUNCTIONAL_CATEGORIES.find(function (c) { return c === destination.category; }) &&\n                    destinationPreferences[destination.id] !== false) {\n                    destinationPreferences[destination.id] = customPrefs.functional;\n                }\n                // Fallback to marketing\n                if (!(destination.id in destinationPreferences)) {\n                    destinationPreferences[destination.id] = customPrefs.marketingAndAnalytics;\n                }\n            };\n            for (var _d = 0, destinations_1 = destinations; _d < destinations_1.length; _d++) {\n                var destination = destinations_1[_d];\n                _loop_1(destination);\n            }\n            return { destinationPreferences: destinationPreferences, customPreferences: customPreferences };\n        };\n        return _this;\n    }\n    ConsentManager.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, writeKey = _a.writeKey, otherWriteKeys = _a.otherWriteKeys, shouldRequireConsent = _a.shouldRequireConsent, implyConsentOnInteraction = _a.implyConsentOnInteraction, cookieDomain = _a.cookieDomain, cookieExpires = _a.cookieExpires, bannerContent = _a.bannerContent, bannerSubContent = _a.bannerSubContent, bannerTextColor = _a.bannerTextColor, bannerBackgroundColor = _a.bannerBackgroundColor, preferencesDialogTitle = _a.preferencesDialogTitle, preferencesDialogContent = _a.preferencesDialogContent, cancelDialogTitle = _a.cancelDialogTitle, cancelDialogContent = _a.cancelDialogContent, customCategories = _a.customCategories, defaultDestinationBehavior = _a.defaultDestinationBehavior, cdnHost = _a.cdnHost, onError = _a.onError;\n        return (React.createElement(ConsentManagerBuilder, { onError: onError, writeKey: writeKey, otherWriteKeys: otherWriteKeys, shouldRequireConsent: shouldRequireConsent, cookieDomain: cookieDomain, cookieExpires: cookieExpires, initialPreferences: this.getInitialPreferences(), mapCustomPreferences: this.handleMapCustomPreferences, customCategories: customCategories, defaultDestinationBehavior: defaultDestinationBehavior, cdnHost: cdnHost }, function (_a) {\n            var destinations = _a.destinations, customCategories = _a.customCategories, newDestinations = _a.newDestinations, preferences = _a.preferences, isConsentRequired = _a.isConsentRequired, setPreferences = _a.setPreferences, resetPreferences = _a.resetPreferences, saveConsent = _a.saveConsent, havePreferencesChanged = _a.havePreferencesChanged, workspaceAddedNewDestinations = _a.workspaceAddedNewDestinations;\n            return (React.createElement(Container, { customCategories: customCategories, destinations: destinations, newDestinations: newDestinations, preferences: preferences, isConsentRequired: isConsentRequired, setPreferences: setPreferences, resetPreferences: resetPreferences, saveConsent: saveConsent, closeBehavior: _this.props.closeBehavior, implyConsentOnInteraction: (implyConsentOnInteraction !== null && implyConsentOnInteraction !== void 0 ? implyConsentOnInteraction : ConsentManager.defaultProps.implyConsentOnInteraction), bannerContent: bannerContent, bannerSubContent: bannerSubContent, bannerTextColor: bannerTextColor || ConsentManager.defaultProps.bannerTextColor, bannerBackgroundColor: bannerBackgroundColor || ConsentManager.defaultProps.bannerBackgroundColor, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, havePreferencesChanged: havePreferencesChanged, defaultDestinationBehavior: defaultDestinationBehavior, workspaceAddedNewDestinations: workspaceAddedNewDestinations }));\n        }));\n    };\n    ConsentManager.displayName = 'ConsentManager';\n    ConsentManager.defaultProps = {\n        otherWriteKeys: [],\n        shouldRequireConsent: function () { return true; },\n        implyConsentOnInteraction: false,\n        onError: undefined,\n        cookieDomain: undefined,\n        cookieExpires: undefined,\n        customCategories: undefined,\n        bannerTextColor: '#fff',\n        bannerSubContent: 'You can change your preferences at any time.',\n        bannerBackgroundColor: '#1f4160',\n        preferencesDialogTitle: 'Website Data Collection Preferences',\n        cancelDialogTitle: 'Are you sure you want to cancel?',\n        defaultDestinationBehavior: 'disable'\n    };\n    return ConsentManager;\n}(PureComponent));\nexport default ConsentManager;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Li, Text, Link, Checkbox, Card } from 'evergreen-ui';\nexport default function Destination(_a) {\n    var destination = _a.destination, preferences = _a.preferences, setPreferences = _a.setPreferences;\n    return (React.createElement(Li, { maxWidth: 280, marginRight: 20 },\n        React.createElement(Card, { elevation: 1, padding: 20, paddingTop: 8 },\n            React.createElement(Checkbox, { label: React.createElement(Link, { href: destination.website, target: \"_blank\" }, destination.name), checked: Boolean(preferences[destination.id]), onChange: function () {\n                    var _a;\n                    return setPreferences((_a = {},\n                        _a[destination.id] = !preferences[destination.id],\n                        _a));\n                } }),\n            React.createElement(Text, { display: \"block\", size: 300 }, destination.description))));\n}\nDestination.propTypes = {\n    destination: PropTypes.object.isRequired,\n    preferences: PropTypes.object.isRequired,\n    setPreferences: PropTypes.func.isRequired\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport fetch from 'isomorphic-fetch';\nimport { flatten, sortedUniqBy, sortBy } from 'lodash';\nfunction fetchDestinationForWriteKey(cdnHost, writeKey) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, destinations, _i, destinations_1, destination;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fetch(\"https://\" + cdnHost + \"/v1/projects/\" + writeKey + \"/integrations\")];\n                case 1:\n                    res = _a.sent();\n                    if (!res.ok) {\n                        throw new Error(\"Failed to fetch integrations for write key \" + writeKey + \": HTTP \" + res.status + \" \" + res.statusText);\n                    }\n                    return [4 /*yield*/, res.json()\n                        // Rename creationName to id to abstract the weird data model\n                    ];\n                case 2:\n                    destinations = _a.sent();\n                    // Rename creationName to id to abstract the weird data model\n                    for (_i = 0, destinations_1 = destinations; _i < destinations_1.length; _i++) {\n                        destination = destinations_1[_i];\n                        destination.id = destination.creationName;\n                        delete destination.creationName;\n                    }\n                    return [2 /*return*/, destinations];\n            }\n        });\n    });\n}\nexport default function fetchDestinations(cdnHost, writeKeys) {\n    return __awaiter(this, void 0, void 0, function () {\n        var destinationsRequests, _i, writeKeys_1, writeKey, destinations, _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    destinationsRequests = [];\n                    for (_i = 0, writeKeys_1 = writeKeys; _i < writeKeys_1.length; _i++) {\n                        writeKey = writeKeys_1[_i];\n                        destinationsRequests.push(fetchDestinationForWriteKey(cdnHost, writeKey));\n                    }\n                    _a = flatten;\n                    return [4 /*yield*/, Promise.all(destinationsRequests)];\n                case 1:\n                    destinations = _a.apply(void 0, [_b.sent()]);\n                    // Remove the dummy Repeater destination\n                    destinations = destinations.filter(function (d) { return d.id !== 'Repeater'; });\n                    destinations = sortBy(destinations, ['id']);\n                    destinations = sortedUniqBy(destinations, 'id');\n                    return [2 /*return*/, destinations];\n            }\n        });\n    });\n}\n","function getConsentMiddleware(destinationPreferences, categoryPreferences, defaultDestinationBehavior) {\n    return function (_a) {\n        var payload = _a.payload, next = _a.next;\n        payload.obj.context.consent = {\n            defaultDestinationBehavior: defaultDestinationBehavior,\n            categoryPreferences: categoryPreferences,\n            destinationPreferences: destinationPreferences\n        };\n        next(payload);\n    };\n}\nexport default function conditionallyLoadAnalytics(_a) {\n    var writeKey = _a.writeKey, destinations = _a.destinations, destinationPreferences = _a.destinationPreferences, isConsentRequired = _a.isConsentRequired, _b = _a.shouldReload, shouldReload = _b === void 0 ? true : _b, defaultDestinationBehavior = _a.defaultDestinationBehavior, categoryPreferences = _a.categoryPreferences;\n    var wd = window;\n    var integrations = { All: false, 'Segment.io': true };\n    var isAnythingEnabled = false;\n    if (!destinationPreferences) {\n        if (isConsentRequired) {\n            return;\n        }\n        // Load a.js normally when consent isn't required and there's no preferences\n        if (!wd.analytics.initialized) {\n            wd.analytics.load(writeKey);\n        }\n        return;\n    }\n    for (var _i = 0, destinations_1 = destinations; _i < destinations_1.length; _i++) {\n        var destination = destinations_1[_i];\n        // Was a preference explicitly set on this destination?\n        var explicitPreference = destination.id in destinationPreferences;\n        if (!explicitPreference && defaultDestinationBehavior === 'enable') {\n            integrations[destination.id] = true;\n            continue;\n        }\n        var isEnabled = Boolean(destinationPreferences[destination.id]);\n        if (isEnabled) {\n            isAnythingEnabled = true;\n        }\n        integrations[destination.id] = isEnabled;\n    }\n    // Reload the page if the trackers have already been initialised so that\n    // the user's new preferences can take affect\n    if (wd.analytics && wd.analytics.initialized) {\n        if (shouldReload) {\n            window.location.reload();\n        }\n        return;\n    }\n    // Don't load a.js at all if nothing has been enabled\n    if (isAnythingEnabled) {\n        var middleware = getConsentMiddleware(destinationPreferences, categoryPreferences, defaultDestinationBehavior);\n        // @ts-ignore: Analytics.JS type should be updated with addSourceMiddleware\n        wd.analytics.addSourceMiddleware(middleware);\n        wd.analytics.load(writeKey, { integrations: integrations });\n    }\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { Component } from 'react';\nimport { loadPreferences, savePreferences } from './preferences';\nimport fetchDestinations from './fetch-destinations';\nimport conditionallyLoadAnalytics from './analytics';\nfunction getNewDestinations(destinations, preferences) {\n    var newDestinations = [];\n    // If there are no preferences then all destinations are new\n    if (!preferences) {\n        return destinations;\n    }\n    for (var _i = 0, destinations_1 = destinations; _i < destinations_1.length; _i++) {\n        var destination = destinations_1[_i];\n        if (preferences[destination.id] === undefined) {\n            newDestinations.push(destination);\n        }\n    }\n    return newDestinations;\n}\nvar ConsentManagerBuilder = /** @class */ (function (_super) {\n    __extends(ConsentManagerBuilder, _super);\n    function ConsentManagerBuilder() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            isLoading: true,\n            destinations: [],\n            newDestinations: [],\n            preferences: {},\n            destinationPreferences: {},\n            isConsentRequired: true,\n            havePreferencesChanged: false,\n            workspaceAddedNewDestinations: false\n        };\n        _this.initialise = function () { return __awaiter(_this, void 0, void 0, function () {\n            var _a, writeKey, _b, otherWriteKeys, _c, shouldRequireConsent, initialPreferences, mapCustomPreferences, defaultDestinationBehavior, cookieDomain, cookieExpires, _d, cdnHost, _e, destinationPreferences, customPreferences, _f, isConsentRequired, destinations, newDestinations, workspaceAddedNewDestinations, preferences, hasInitialPreferenceToTrue, emptyCustomPreferecences, mapped;\n            return __generator(this, function (_g) {\n                switch (_g.label) {\n                    case 0:\n                        _a = this.props, writeKey = _a.writeKey, _b = _a.otherWriteKeys, otherWriteKeys = _b === void 0 ? ConsentManagerBuilder.defaultProps.otherWriteKeys : _b, _c = _a.shouldRequireConsent, shouldRequireConsent = _c === void 0 ? ConsentManagerBuilder.defaultProps.shouldRequireConsent : _c, initialPreferences = _a.initialPreferences, mapCustomPreferences = _a.mapCustomPreferences, defaultDestinationBehavior = _a.defaultDestinationBehavior, cookieDomain = _a.cookieDomain, cookieExpires = _a.cookieExpires, _d = _a.cdnHost, cdnHost = _d === void 0 ? ConsentManagerBuilder.defaultProps.cdnHost : _d;\n                        _e = loadPreferences(), destinationPreferences = _e.destinationPreferences, customPreferences = _e.customPreferences;\n                        return [4 /*yield*/, Promise.all([\n                                shouldRequireConsent(),\n                                fetchDestinations(cdnHost, __spreadArrays([writeKey], otherWriteKeys))\n                            ])];\n                    case 1:\n                        _f = _g.sent(), isConsentRequired = _f[0], destinations = _f[1];\n                        newDestinations = getNewDestinations(destinations, destinationPreferences || {});\n                        workspaceAddedNewDestinations = destinationPreferences &&\n                            Object.keys(destinationPreferences).length > 0 &&\n                            newDestinations.length > 0;\n                        if (mapCustomPreferences) {\n                            preferences = customPreferences || initialPreferences || {};\n                            hasInitialPreferenceToTrue = Object.values(initialPreferences || {}).some(Boolean);\n                            emptyCustomPreferecences = Object.values(customPreferences || {}).every(function (v) { return v === null || v === undefined; });\n                            if ((hasInitialPreferenceToTrue && emptyCustomPreferecences) ||\n                                (defaultDestinationBehavior === 'imply' && workspaceAddedNewDestinations)) {\n                                mapped = mapCustomPreferences(destinations, preferences);\n                                destinationPreferences = mapped.destinationPreferences;\n                                customPreferences = mapped.customPreferences;\n                                savePreferences({ destinationPreferences: destinationPreferences, customPreferences: customPreferences, cookieDomain: cookieDomain, cookieExpires: cookieExpires });\n                            }\n                        }\n                        else {\n                            preferences = destinationPreferences || initialPreferences;\n                        }\n                        conditionallyLoadAnalytics({\n                            writeKey: writeKey,\n                            destinations: destinations,\n                            destinationPreferences: destinationPreferences,\n                            isConsentRequired: isConsentRequired,\n                            defaultDestinationBehavior: defaultDestinationBehavior,\n                            categoryPreferences: preferences\n                        });\n                        this.setState({\n                            isLoading: false,\n                            destinations: destinations,\n                            newDestinations: newDestinations,\n                            preferences: preferences,\n                            isConsentRequired: isConsentRequired,\n                            destinationPreferences: destinationPreferences,\n                            workspaceAddedNewDestinations: Boolean(workspaceAddedNewDestinations)\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        _this.handleSetPreferences = function (newPreferences) {\n            _this.setState(function (prevState) {\n                var destinations = prevState.destinations, existingPreferences = prevState.preferences;\n                var preferences = _this.mergePreferences({\n                    destinations: destinations,\n                    newPreferences: newPreferences,\n                    existingPreferences: existingPreferences\n                });\n                return __assign(__assign({}, prevState), { preferences: preferences, havePreferencesChanged: true });\n            });\n        };\n        _this.handleResetPreferences = function () {\n            var _a = _this.props, initialPreferences = _a.initialPreferences, mapCustomPreferences = _a.mapCustomPreferences;\n            var _b = loadPreferences(), destinationPreferences = _b.destinationPreferences, customPreferences = _b.customPreferences;\n            var preferences;\n            if (mapCustomPreferences) {\n                preferences = customPreferences || initialPreferences;\n            }\n            else {\n                preferences = destinationPreferences || initialPreferences;\n            }\n            _this.setState({ preferences: preferences });\n        };\n        _this.handleSaveConsent = function (newPreferences, shouldReload) {\n            var _a = _this.props, writeKey = _a.writeKey, cookieDomain = _a.cookieDomain, cookieExpires = _a.cookieExpires, mapCustomPreferences = _a.mapCustomPreferences, defaultDestinationBehavior = _a.defaultDestinationBehavior;\n            _this.setState(function (prevState) {\n                var destinations = prevState.destinations, existingPreferences = prevState.preferences, isConsentRequired = prevState.isConsentRequired;\n                var preferences = _this.mergePreferences({\n                    destinations: destinations,\n                    newPreferences: newPreferences,\n                    existingPreferences: existingPreferences\n                });\n                var destinationPreferences;\n                var customPreferences;\n                if (mapCustomPreferences) {\n                    var custom = mapCustomPreferences(destinations, preferences);\n                    destinationPreferences = custom.destinationPreferences;\n                    customPreferences = custom.customPreferences;\n                    if (customPreferences) {\n                        // Allow the customPreferences to be updated from mapCustomPreferences\n                        preferences = customPreferences;\n                    }\n                    else {\n                        // Make returning the customPreferences from mapCustomPreferences optional\n                        customPreferences = preferences;\n                    }\n                }\n                else {\n                    destinationPreferences = preferences;\n                }\n                var newDestinations = getNewDestinations(destinations, destinationPreferences);\n                // If preferences haven't changed, don't reload the page as it's a disruptive experience for end-users\n                if (prevState.havePreferencesChanged || newDestinations.length > 0) {\n                    savePreferences({ destinationPreferences: destinationPreferences, customPreferences: customPreferences, cookieDomain: cookieDomain, cookieExpires: cookieExpires });\n                    conditionallyLoadAnalytics({\n                        writeKey: writeKey,\n                        destinations: destinations,\n                        destinationPreferences: destinationPreferences,\n                        isConsentRequired: isConsentRequired,\n                        shouldReload: shouldReload,\n                        defaultDestinationBehavior: defaultDestinationBehavior,\n                        categoryPreferences: customPreferences\n                    });\n                }\n                return __assign(__assign({}, prevState), { destinationPreferences: destinationPreferences, preferences: preferences, newDestinations: newDestinations });\n            });\n        };\n        _this.mergePreferences = function (args) {\n            var destinations = args.destinations, existingPreferences = args.existingPreferences, newPreferences = args.newPreferences;\n            var preferences;\n            if (typeof newPreferences === 'boolean') {\n                var destinationPreferences = {};\n                for (var _i = 0, destinations_2 = destinations; _i < destinations_2.length; _i++) {\n                    var destination = destinations_2[_i];\n                    destinationPreferences[destination.id] = newPreferences;\n                }\n                preferences = destinationPreferences;\n            }\n            else if (newPreferences) {\n                preferences = __assign(__assign({}, existingPreferences), newPreferences);\n            }\n            else {\n                preferences = existingPreferences;\n            }\n            return preferences;\n        };\n        return _this;\n    }\n    ConsentManagerBuilder.prototype.render = function () {\n        var _a = this.props, children = _a.children, customCategories = _a.customCategories;\n        var _b = this.state, isLoading = _b.isLoading, destinations = _b.destinations, preferences = _b.preferences, newDestinations = _b.newDestinations, isConsentRequired = _b.isConsentRequired, havePreferencesChanged = _b.havePreferencesChanged, workspaceAddedNewDestinations = _b.workspaceAddedNewDestinations, destinationPreferences = _b.destinationPreferences;\n        if (isLoading) {\n            return null;\n        }\n        return children({\n            destinations: destinations,\n            customCategories: customCategories,\n            newDestinations: newDestinations,\n            preferences: preferences,\n            isConsentRequired: isConsentRequired,\n            havePreferencesChanged: havePreferencesChanged,\n            workspaceAddedNewDestinations: workspaceAddedNewDestinations,\n            destinationPreferences: destinationPreferences,\n            setPreferences: this.handleSetPreferences,\n            resetPreferences: this.handleResetPreferences,\n            saveConsent: this.handleSaveConsent\n        });\n    };\n    ConsentManagerBuilder.prototype.componentDidMount = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var onError, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        onError = this.props.onError;\n                        if (!(onError && typeof onError === 'function')) return [3 /*break*/, 6];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 5]);\n                        return [4 /*yield*/, this.initialise()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 3:\n                        e_1 = _a.sent();\n                        return [4 /*yield*/, onError(e_1)];\n                    case 4:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 5: return [3 /*break*/, 8];\n                    case 6: return [4 /*yield*/, this.initialise()];\n                    case 7:\n                        _a.sent();\n                        _a.label = 8;\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ConsentManagerBuilder.displayName = 'ConsentManagerBuilder';\n    ConsentManagerBuilder.defaultProps = {\n        otherWriteKeys: [],\n        onError: undefined,\n        shouldRequireConsent: function () { return true; },\n        initialPreferences: {},\n        cdnHost: 'cdn.segment.com'\n    };\n    return ConsentManagerBuilder;\n}(Component));\nexport default ConsentManagerBuilder;\n","import CMB from './consent-manager-builder';\nimport CM from './consent-manager';\nexport { openDialog as openConsentManager } from './consent-manager/container';\nexport { loadPreferences, savePreferences, onPreferencesSaved } from './consent-manager-builder/preferences';\nexport var ConsentManagerBuilder = CMB;\nexport var ConsentManager = CM;\nexport function doNotTrack() {\n    if (typeof window !== 'undefined' && (window.navigator || navigator)) {\n        var nav = navigator;\n        var doNotTrackValue = nav.doNotTrack || window.doNotTrack || nav.msDoNotTrack;\n        // Normalise Firefox < 32\n        // https://developer.mozilla.org/en-US/docs/Web/API/Navigator/doNotTrack\n        if (doNotTrackValue === 'yes') {\n            doNotTrackValue = '1';\n        }\n        else if (doNotTrackValue === 'no') {\n            doNotTrackValue = '0';\n        }\n        if (doNotTrackValue === '1') {\n            return true;\n        }\n        if (doNotTrackValue === '0') {\n            return false;\n        }\n    }\n    return null;\n}\n","// TODO: remove duplicate cookie library from bundle\nimport cookies from 'js-cookie';\nimport topDomain from '@segment/top-domain';\nimport { EventEmitter } from 'events';\nvar COOKIE_KEY = 'tracking-preferences';\nvar COOKIE_DEFAULT_EXPIRES = 365;\n// TODO: harden against invalid cookies\n// TODO: harden against different versions of cookies\nexport function loadPreferences() {\n    var preferences = cookies.getJSON(COOKIE_KEY);\n    if (!preferences) {\n        return {};\n    }\n    return {\n        destinationPreferences: preferences.destinations,\n        customPreferences: preferences.custom\n    };\n}\nvar emitter = new EventEmitter();\n/**\n * Subscribes to consent preferences changing over time and returns\n * a cleanup function that can be invoked to remove the instantiated listener.\n *\n * @param listener a function to be invoked when ConsentPreferences are saved\n */\nexport function onPreferencesSaved(listener) {\n    emitter.on('preferencesSaved', listener);\n    return function () { return emitter.off('preferencesSaved', listener); };\n}\nexport function savePreferences(_a) {\n    var destinationPreferences = _a.destinationPreferences, customPreferences = _a.customPreferences, cookieDomain = _a.cookieDomain, cookieExpires = _a.cookieExpires;\n    var wd = window;\n    if (wd.analytics) {\n        wd.analytics.identify({\n            destinationTrackingPreferences: destinationPreferences,\n            customTrackingPreferences: customPreferences\n        });\n    }\n    var domain = cookieDomain || topDomain(window.location.href);\n    var expires = cookieExpires || COOKIE_DEFAULT_EXPIRES;\n    var value = {\n        version: 1,\n        destinations: destinationPreferences,\n        custom: customPreferences\n    };\n    cookies.set(COOKIE_KEY, value, {\n        expires: expires,\n        domain: domain\n    });\n    emitter.emit('preferencesSaved', {\n        destinationPreferences: destinationPreferences,\n        customPreferences: customPreferences\n    });\n}\n","export default \"<html lang=\\\"en\\\">\\n  <body>\\n    <div id=\\\"consent-manager\\\"></div>\\n    <img src=\\\"https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif\\\" />\\n\\n    <button\\n      type=\\\"button\\\"\\n      onclick=\\\"event.stopPropagation(); window.consentManager.openConsentManager()\\\"\\n    >\\n      Data Collection and Cookie Preferences\\n    </button>\\n\\n    <script type=\\\"application/javascript\\\">\\n      window.consentManagerConfig = function(exports) {\\n        return {\\n          container: '#consent-manager',\\n          writeKey: 'tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0',\\n          bannerContent:\\n            'We use cookies (and other similar technologies) to collect data to improve your experience on our site.',\\n          bannerSubContent: 'You can change your preferences at any time.',\\n          preferencesDialogTitle: 'Website Data Collection Preferences',\\n          preferencesDialogContent:\\n            'We use data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.',\\n          cancelDialogTitle: 'Are you sure you want to cancel?',\\n          cancelDialogContent:\\n            \\\"Your preferences have not been saved. By continuing to use our website, you're agreeing to our Website Data Collection Policy\\\",\\n          closeBehavior: 'accept'\\n        }\\n      }\\n    </script>\\n\\n    <!-- Setup the Segment Consent Manager tag -->\\n    <script src=\\\"./standalone/consent-manager.js\\\" defer></script>\\n\\n    <!-- Load analytics.js -->\\n    <script>\\n      !(function() {\\n        var analytics = (window.analytics = window.analytics || [])\\n        if (!analytics.initialize)\\n          if (analytics.invoked)\\n            window.console && console.error && console.error('Segment snippet included twice.')\\n          else {\\n            analytics.invoked = !0\\n            analytics.methods = [\\n              'trackSubmit',\\n              'trackClick',\\n              'trackLink',\\n              'trackForm',\\n              'pageview',\\n              'identify',\\n              'reset',\\n              'group',\\n              'track',\\n              'ready',\\n              'alias',\\n              'debug',\\n              'page',\\n              'once',\\n              'off',\\n              'on',\\n              'addSourceMiddleware'\\n            ]\\n            analytics.factory = function(t) {\\n              return function() {\\n                var e = Array.prototype.slice.call(arguments)\\n                e.unshift(t)\\n                analytics.push(e)\\n                return analytics\\n              }\\n            }\\n            for (var t = 0; t < analytics.methods.length; t++) {\\n              var e = analytics.methods[t]\\n              analytics[e] = analytics.factory(e)\\n            }\\n            analytics.load = function(t, e) {\\n              var n = document.createElement('script')\\n              n.type = 'text/javascript'\\n              n.async = !0\\n              n.src =\\n                ('https:' === document.location.protocol ? 'https://' : 'http://') +\\n                'cdn.segment.com/analytics.js/v1/' +\\n                t +\\n                '/analytics.min.js'\\n              var o = document.getElementsByTagName('script')[0]\\n              o.parentNode.insertBefore(n, o)\\n              analytics._loadOptions = e\\n            }\\n            analytics.SNIPPET_VERSION = '4.1.0'\\n            analytics.page()\\n          }\\n      })()\\n    </script>\\n  </body>\\n</html>\\n\"","export default \"<html lang=\\\"en\\\">\\n  <body>\\n    <script type=\\\"application/javascript\\\">\\n      window.consentManagerConfig = function(exports) {\\n        exports.preferences.onPreferencesSaved(function(prefs) {\\n          // could be used to store consent server side, or send it into an API\\n        })\\n\\n        return {\\n          container: '#consent-manager',\\n          writeKey: 'n2DAIaakJzCUq0saLY0LMcm9dKsqCZvU',\\n          /* initialPreferences allows for customizing which categories already pre-loaded */\\n          initialPreferences: {\\n            marketingAndAnalytics: false,\\n            // functional: true will automatically record consent for functional cookies\\n            functional: true\\n          },\\n          /*\\n      The consent manager ships with a lightweight version of \\n      React (preact) that you can use to customize the consent manager further\\n    */\\n          bannerContent: exports.React.createElement('span', null, 'We like cookies '),\\n          bannerSubContent: 'Change your preferences ',\\n          preferencesDialogTitle: 'Website Data Collection',\\n          preferencesDialogContent: 'We use data collected by cookies and JavaScript libraries.',\\n          cancelDialogTitle: 'Are you sure you want to cancel?',\\n          cancelDialogContent: 'Your preferences have not been saved.'\\n        }\\n      }\\n    </script>\\n\\n    <div id=\\\"consent-manager\\\"></div>\\n\\n    <div>\\n      <img src=\\\"http://giphygifs.s3.amazonaws.com/media/13HBDT4QSTpveU/giphy.gif\\\" />\\n    </div>\\n\\n    <button\\n      type=\\\"button\\\"\\n      onclick=\\\"event.stopPropagation(); window.consentManager.openConsentManager()\\\"\\n    >\\n      Data Collection and Cookie Preferences\\n    </button>\\n\\n    <script src=\\\"./standalone/consent-manager.js\\\" defer></script>\\n\\n    <!-- Load analytics.js -->\\n    <script>\\n      !(function() {\\n        var analytics = (window.analytics = window.analytics || [])\\n        if (!analytics.initialize)\\n          if (analytics.invoked)\\n            window.console && console.error && console.error('Segment snippet included twice.')\\n          else {\\n            analytics.invoked = !0\\n            analytics.methods = [\\n              'trackSubmit',\\n              'trackClick',\\n              'trackLink',\\n              'trackForm',\\n              'pageview',\\n              'identify',\\n              'reset',\\n              'group',\\n              'track',\\n              'ready',\\n              'alias',\\n              'debug',\\n              'page',\\n              'once',\\n              'off',\\n              'on',\\n              'addSourceMiddleware'\\n            ]\\n            analytics.factory = function(t) {\\n              return function() {\\n                var e = Array.prototype.slice.call(arguments)\\n                e.unshift(t)\\n                analytics.push(e)\\n                return analytics\\n              }\\n            }\\n            for (var t = 0; t < analytics.methods.length; t++) {\\n              var e = analytics.methods[t]\\n              analytics[e] = analytics.factory(e)\\n            }\\n            analytics.load = function(t, e) {\\n              var n = document.createElement('script')\\n              n.type = 'text/javascript'\\n              n.async = !0\\n              n.src =\\n                ('https:' === document.location.protocol ? 'https://' : 'http://') +\\n                'cdn.segment.com/analytics.js/v1/' +\\n                t +\\n                '/analytics.min.js'\\n              var o = document.getElementsByTagName('script')[0]\\n              o.parentNode.insertBefore(n, o)\\n              analytics._loadOptions = e\\n            }\\n            analytics.SNIPPET_VERSION = '4.1.0'\\n            analytics.page()\\n          }\\n      })()\\n    </script>\\n  </body>\\n</html>\\n\"","import React from 'react';\nimport cookies from 'js-cookie';\nimport { Pane, Heading, Button, Paragraph } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager } from '../src';\nimport { bannerContent, bannerSubContent, preferencesDialogContent, preferencesDialogTitle, cancelDialogContent, cancelDialogTitle } from './components/common-react';\nexport var ImplyConsentOnInteraction = function () {\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'], bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, implyConsentOnInteraction: true }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Your website content \"),\n            React.createElement(Paragraph, null, \"Clicking anywhere on this page will cause the Consent Manager to imply consent.\"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(\"div\", null,\n                React.createElement(Button, { onClick: openConsentManager }, \"Data Collection and Cookie Preferences\")),\n            React.createElement(\"div\", null,\n                React.createElement(Heading, null, \"to see the banner again:\"),\n                React.createElement(Button, { onClick: function () {\n                        cookies.remove('tracking-preferences');\n                        window.location.reload();\n                    } }, \"Clear tracking preferences cookie\")))));\n};\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport { css } from 'react-emotion';\nexport default css(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial,\\n    sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\\n  -moz-osx-font-smoothing: grayscale;\\n  -webkit-font-smoothing: antialiased;\\n  font-smoothing: antialiased;\\n  color: #435a6f;\\n  font-size: 16px;\\n  font-weight: 400;\\n  line-height: 22px;\\n  letter-spacing: -0.05px;\\n\"], [\"\\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial,\\n    sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\\n  -moz-osx-font-smoothing: grayscale;\\n  -webkit-font-smoothing: antialiased;\\n  font-smoothing: antialiased;\\n  color: #435a6f;\\n  font-size: 16px;\\n  font-weight: 400;\\n  line-height: 22px;\\n  letter-spacing: -0.05px;\\n\"])));\nvar templateObject_1;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { PureComponent } from 'react';\nimport styled from 'react-emotion';\nimport fontStyles from './font-styles';\nvar Root = styled('div')(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  \", \";\\n  position: relative;\\n  padding: 8px;\\n  padding-right: 40px;\\n  background: \", \";\\n  color: \", \";\\n  text-align: center;\\n  font-size: 12px;\\n  line-height: 1.3;\\n\"], [\"\\n  \", \";\\n  position: relative;\\n  padding: 8px;\\n  padding-right: 40px;\\n  background: \", \";\\n  color: \", \";\\n  text-align: center;\\n  font-size: 12px;\\n  line-height: 1.3;\\n\"])), fontStyles, function (props) { return props.backgroundColor; }, function (props) { return props.textColor; });\nvar Content = styled('div')(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  a,\\n  button {\\n    display: inline;\\n    padding: 0;\\n    border: none;\\n    background: none;\\n    color: inherit;\\n    font: inherit;\\n    text-decoration: underline;\\n    cursor: pointer;\\n  }\\n\"], [\"\\n  a,\\n  button {\\n    display: inline;\\n    padding: 0;\\n    border: none;\\n    background: none;\\n    color: inherit;\\n    font: inherit;\\n    text-decoration: underline;\\n    cursor: pointer;\\n  }\\n\"])));\nvar P = styled('p')(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  margin: 0;\\n  &:not(:last-child) {\\n    margin-bottom: 6px;\\n  }\\n\"], [\"\\n  margin: 0;\\n  &:not(:last-child) {\\n    margin-bottom: 6px;\\n  }\\n\"])));\nvar CloseButton = styled('button')(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  position: absolute;\\n  right: 8px;\\n  top: 50%;\\n  transform: translateY(-50%);\\n  padding: 8px;\\n  border: none;\\n  background: none;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 14px;\\n  line-height: 1;\\n  cursor: pointer;\\n\"], [\"\\n  position: absolute;\\n  right: 8px;\\n  top: 50%;\\n  transform: translateY(-50%);\\n  padding: 8px;\\n  border: none;\\n  background: none;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 14px;\\n  line-height: 1;\\n  cursor: pointer;\\n\"])));\nvar Banner = /** @class */ (function (_super) {\n    __extends(Banner, _super);\n    function Banner() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Banner.prototype.render = function () {\n        var _a = this.props, innerRef = _a.innerRef, onClose = _a.onClose, onChangePreferences = _a.onChangePreferences, content = _a.content, subContent = _a.subContent, backgroundColor = _a.backgroundColor, textColor = _a.textColor;\n        return (React.createElement(Root, { innerRef: innerRef, backgroundColor: backgroundColor, textColor: textColor },\n            React.createElement(Content, null,\n                React.createElement(P, null, content),\n                React.createElement(P, null,\n                    React.createElement(\"button\", { type: \"button\", onClick: onChangePreferences }, subContent))),\n            React.createElement(CloseButton, { type: \"button\", title: \"Close\", \"aria-label\": \"Close\", onClick: onClose }, \"\\u2715\")));\n    };\n    Banner.displayName = 'Banner';\n    return Banner;\n}(PureComponent));\nexport default Banner;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { PureComponent } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled, { keyframes } from 'react-emotion';\nimport nanoid from 'nanoid';\nimport fontStyles from './font-styles';\nvar ANIMATION_DURATION = '200ms';\nvar ANIMATION_EASING = 'cubic-bezier(0.0, 0.0, 0.2, 1)';\nvar Overlay = styled('div')(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  z-index: 1000;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(67, 90, 111, 0.699);\\n\"], [\"\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  z-index: 1000;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(67, 90, 111, 0.699);\\n\"])));\nvar openAnimation = keyframes(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  from {\\n    transform: scale(0.8);\\n    opacity: 0;\\n  }\\n  to {\\n    transform: scale(1);\\n    opacity: 1;\\n  }\\n\"], [\"\\n  from {\\n    transform: scale(0.8);\\n    opacity: 0;\\n  }\\n  to {\\n    transform: scale(1);\\n    opacity: 1;\\n  }\\n\"])));\nvar Root = styled('section')(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  \", \";\\n  display: flex;\\n  flex-direction: column;\\n  max-width: calc(100vw - 16px);\\n  max-height: calc(100vh - 16px);\\n  width: \", \";\\n  margin: 8px;\\n  background: #fff;\\n  border-radius: 8px;\\n  animation: \", \" \", \" \", \" both;\\n\"], [\"\\n  \", \";\\n  display: flex;\\n  flex-direction: column;\\n  max-width: calc(100vw - 16px);\\n  max-height: calc(100vh - 16px);\\n  width: \", \";\\n  margin: 8px;\\n  background: #fff;\\n  border-radius: 8px;\\n  animation: \", \" \", \" \", \" both;\\n\"])), fontStyles, function (props) { return props.width; }, openAnimation, ANIMATION_DURATION, ANIMATION_EASING);\nvar Form = styled('form')(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: column;\\n  min-height: 0;\\n\"], [\"\\n  display: flex;\\n  flex-direction: column;\\n  min-height: 0;\\n\"])));\nvar Header = styled('div')(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  flex: 1 0 auto;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 12px 16px;\\n  border-bottom: 1px solid rgba(67, 90, 111, 0.079);\\n\"], [\"\\n  flex: 1 0 auto;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 12px 16px;\\n  border-bottom: 1px solid rgba(67, 90, 111, 0.079);\\n\"])));\nvar Title = styled('h2')(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  margin: 0;\\n  color: #1f4160;\\n  font-size: 16px;\\n  font-weight: 600;\\n  line-height: 1.3;\\n\"], [\"\\n  margin: 0;\\n  color: #1f4160;\\n  font-size: 16px;\\n  font-weight: 600;\\n  line-height: 1.3;\\n\"])));\nvar HeaderCancelButton = styled('button')(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  padding: 8px;\\n  border: none;\\n  background: none;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 14px;\\n  line-height: 1;\\n  cursor: pointer;\\n\"], [\"\\n  padding: 8px;\\n  border: none;\\n  background: none;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 14px;\\n  line-height: 1;\\n  cursor: pointer;\\n\"])));\nvar Content = styled('div')(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n  overflow-y: auto;\\n  padding: 16px;\\n  padding-bottom: 0;\\n  min-height: 0;\\n  font-size: 14px;\\n  line-height: 1.2;\\n\\n  p {\\n    margin: 0;\\n    &:not(:last-child) {\\n      margin-bottom: 0.7em;\\n    }\\n  }\\n\\n  a {\\n    color: #47b881;\\n    &:hover {\\n      color: #64c395;\\n    }\\n    &:active {\\n      color: #248953;\\n    }\\n  }\\n\"], [\"\\n  overflow-y: auto;\\n  padding: 16px;\\n  padding-bottom: 0;\\n  min-height: 0;\\n  font-size: 14px;\\n  line-height: 1.2;\\n\\n  p {\\n    margin: 0;\\n    &:not(:last-child) {\\n      margin-bottom: 0.7em;\\n    }\\n  }\\n\\n  a {\\n    color: #47b881;\\n    &:hover {\\n      color: #64c395;\\n    }\\n    &:active {\\n      color: #248953;\\n    }\\n  }\\n\"])));\nvar Buttons = styled('div')(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n  padding: 16px;\\n  text-align: right;\\n\"], [\"\\n  padding: 16px;\\n  text-align: right;\\n\"])));\nvar Dialog = /** @class */ (function (_super) {\n    __extends(Dialog, _super);\n    function Dialog(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleRootRef = function (node) {\n            _this.root = node;\n        };\n        _this.handleFormRef = function (node) {\n            _this.form = node;\n        };\n        _this.handleOverlayClick = function (e) {\n            var onCancel = _this.props.onCancel;\n            // Ignore propogated clicks from inside the dialog\n            if (onCancel && _this.root && !_this.root.contains(e.target)) {\n                onCancel();\n            }\n        };\n        _this.handleEsc = function (e) {\n            var onCancel = _this.props.onCancel;\n            // Esc key\n            if (onCancel && e.keyCode === 27) {\n                onCancel();\n            }\n        };\n        _this.titleId = nanoid();\n        _this.container = document.createElement('div');\n        _this.container.setAttribute('data-consent-manager-dialog', '');\n        document.body.appendChild(_this.container);\n        return _this;\n    }\n    Dialog.prototype.render = function () {\n        var _a = this.props, onCancel = _a.onCancel, onSubmit = _a.onSubmit, title = _a.title, children = _a.children, buttons = _a.buttons, width = _a.width;\n        var dialog = (React.createElement(Overlay, { onClick: this.handleOverlayClick },\n            React.createElement(Root, { innerRef: this.handleRootRef, role: \"dialog\", \"aria-modal\": true, \"aria-labelledby\": this.titleId, width: width },\n                React.createElement(Header, null,\n                    React.createElement(Title, { id: this.titleId }, title),\n                    onCancel && (React.createElement(HeaderCancelButton, { onClick: onCancel, title: \"Cancel\", \"aria-label\": \"Cancel\" }, \"\\u2715\"))),\n                React.createElement(Form, { innerRef: this.handleFormRef, onSubmit: onSubmit },\n                    React.createElement(Content, null, children),\n                    React.createElement(Buttons, null, buttons)))));\n        return ReactDOM.createPortal(dialog, this.container);\n    };\n    Dialog.prototype.componentDidMount = function () {\n        var innerRef = this.props.innerRef;\n        if (this.form) {\n            var input = this.form.querySelector('input,button');\n            if (input) {\n                input.focus();\n            }\n        }\n        document.body.addEventListener('keydown', this.handleEsc, false);\n        document.body.style.overflow = 'hidden';\n        innerRef(this.container);\n    };\n    Dialog.prototype.componentWillUnmount = function () {\n        var innerRef = this.props.innerRef;\n        document.body.removeEventListener('keydown', this.handleEsc, false);\n        document.body.style.overflow = '';\n        document.body.removeChild(this.container);\n        innerRef(null);\n    };\n    Dialog.displayName = 'Dialog';\n    Dialog.defaultProps = {\n        onCancel: undefined,\n        width: '750px'\n    };\n    return Dialog;\n}(PureComponent));\nexport default Dialog;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport styled, { css } from 'react-emotion';\nvar baseStyles = css(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  height: 32px;\\n  padding: 0 16px;\\n  border: none;\\n  border-radius: 4px;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 12px;\\n  line-height: 1;\\n  cursor: pointer;\\n  outline: none;\\n  transition: box-shadow 80ms ease-in-out;\\n\"], [\"\\n  height: 32px;\\n  padding: 0 16px;\\n  border: none;\\n  border-radius: 4px;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 12px;\\n  line-height: 1;\\n  cursor: pointer;\\n  outline: none;\\n  transition: box-shadow 80ms ease-in-out;\\n\"])));\nexport var DefaultButton = styled('button')(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  \", \";\\n  margin-right: 8px;\\n  background-color: #fff;\\n  background-image: linear-gradient(to top, rgba(67, 90, 111, 0.041), rgba(255, 255, 255, 0.041));\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.146), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  &:hover {\\n    background-image: linear-gradient(to top, rgba(67, 90, 111, 0.057), rgba(67, 90, 111, 0.025));\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.255),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.114);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(1, 108, 209, 0.146), inset 0 0 0 1px rgba(67, 90, 111, 0.38),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  }\\n  &:active {\\n    background: rgba(1, 108, 209, 0.079);\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.146),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  }\\n\"], [\"\\n  \", \";\\n  margin-right: 8px;\\n  background-color: #fff;\\n  background-image: linear-gradient(to top, rgba(67, 90, 111, 0.041), rgba(255, 255, 255, 0.041));\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.146), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  &:hover {\\n    background-image: linear-gradient(to top, rgba(67, 90, 111, 0.057), rgba(67, 90, 111, 0.025));\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.255),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.114);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(1, 108, 209, 0.146), inset 0 0 0 1px rgba(67, 90, 111, 0.38),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  }\\n  &:active {\\n    background: rgba(1, 108, 209, 0.079);\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.146),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  }\\n\"])), baseStyles);\nexport var GreenButton = styled('button')(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  \", \";\\n  background-color: #47b881;\\n  background-image: linear-gradient(to top, #3faf77, #47b881);\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  color: #fff;\\n  &:hover {\\n    background-image: linear-gradient(to top, #37a56d, #3faf77);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(71, 184, 129, 0.477), inset 0 0 0 1px rgba(71, 184, 129, 0.204),\\n      inset 0 -1px 1px 0 rgba(71, 184, 129, 0.204);\\n  }\\n  &:active {\\n    background-image: linear-gradient(to top, #2d9760, #248953);\\n    box-shadow: inset 0 0 0 1px rgba(71, 184, 129, 0.204),\\n      inset 0 -1px 1px 0 rgba(71, 184, 129, 0.204);\\n  }\\n\"], [\"\\n  \", \";\\n  background-color: #47b881;\\n  background-image: linear-gradient(to top, #3faf77, #47b881);\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  color: #fff;\\n  &:hover {\\n    background-image: linear-gradient(to top, #37a56d, #3faf77);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(71, 184, 129, 0.477), inset 0 0 0 1px rgba(71, 184, 129, 0.204),\\n      inset 0 -1px 1px 0 rgba(71, 184, 129, 0.204);\\n  }\\n  &:active {\\n    background-image: linear-gradient(to top, #2d9760, #248953);\\n    box-shadow: inset 0 0 0 1px rgba(71, 184, 129, 0.204),\\n      inset 0 -1px 1px 0 rgba(71, 184, 129, 0.204);\\n  }\\n\"])), baseStyles);\nexport var RedButton = styled('button')(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  \", \";\\n  background-color: #f36331;\\n  background-image: linear-gradient(to top, #f4541d, #f36331);\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  color: #fff;\\n  &:hover {\\n    background-image: linear-gradient(to top, #f4450a, #f4541d);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(243, 99, 49, 0.477), inset 0 0 0 1px rgba(243, 99, 49, 0.204),\\n      inset 0 -1px 1px 0 rgba(243, 99, 49, 0.204);\\n  }\\n  &:active {\\n    background-image: linear-gradient(to top, #dd3c06, #c63403);\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  }\\n\"], [\"\\n  \", \";\\n  background-color: #f36331;\\n  background-image: linear-gradient(to top, #f4541d, #f36331);\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  color: #fff;\\n  &:hover {\\n    background-image: linear-gradient(to top, #f4450a, #f4541d);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(243, 99, 49, 0.477), inset 0 0 0 1px rgba(243, 99, 49, 0.204),\\n      inset 0 -1px 1px 0 rgba(243, 99, 49, 0.204);\\n  }\\n  &:active {\\n    background-image: linear-gradient(to top, #dd3c06, #c63403);\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  }\\n\"])), baseStyles);\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { PureComponent } from 'react';\nimport styled, { css } from 'react-emotion';\nimport Dialog from './dialog';\nimport { DefaultButton, GreenButton } from './buttons';\nvar hideOnMobile = css(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  @media (max-width: 600px) {\\n    display: none;\\n  }\\n\"], [\"\\n  @media (max-width: 600px) {\\n    display: none;\\n  }\\n\"])));\nvar TableScroll = styled('div')(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  overflow-x: auto;\\n  margin-top: 16px;\\n\"], [\"\\n  overflow-x: auto;\\n  margin-top: 16px;\\n\"])));\nvar Table = styled('table')(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  border-collapse: collapse;\\n  font-size: 12px;\\n\"], [\"\\n  border-collapse: collapse;\\n  font-size: 12px;\\n\"])));\nvar ColumnHeading = styled('th')(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  background: #f7f8fa;\\n  color: #1f4160;\\n  font-weight: 600;\\n  text-align: left;\\n  border-width: 2px;\\n\"], [\"\\n  background: #f7f8fa;\\n  color: #1f4160;\\n  font-weight: 600;\\n  text-align: left;\\n  border-width: 2px;\\n\"])));\nvar RowHeading = styled('th')(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  font-weight: normal;\\n  text-align: left;\\n\"], [\"\\n  font-weight: normal;\\n  text-align: left;\\n\"])));\nvar Row = styled('tr')(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  th,\\n  td {\\n    vertical-align: top;\\n    padding: 8px 12px;\\n    border: 1px solid rgba(67, 90, 111, 0.114);\\n  }\\n  td {\\n    border-top: none;\\n  }\\n\"], [\"\\n  th,\\n  td {\\n    vertical-align: top;\\n    padding: 8px 12px;\\n    border: 1px solid rgba(67, 90, 111, 0.114);\\n  }\\n  td {\\n    border-top: none;\\n  }\\n\"])));\nvar InputCell = styled('td')(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  input {\\n    vertical-align: middle;\\n  }\\n  label {\\n    display: block;\\n    margin-bottom: 4px;\\n    white-space: nowrap;\\n  }\\n\"], [\"\\n  input {\\n    vertical-align: middle;\\n  }\\n  label {\\n    display: block;\\n    margin-bottom: 4px;\\n    white-space: nowrap;\\n  }\\n\"])));\nvar PreferenceDialog = /** @class */ (function (_super) {\n    __extends(PreferenceDialog, _super);\n    function PreferenceDialog() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleChange = function (e) {\n            var onChange = _this.props.onChange;\n            onChange(e.target.name, e.target.value === 'true');\n        };\n        _this.handleSubmit = function (e) {\n            var _a = _this.props, onSave = _a.onSave, preferences = _a.preferences, marketingAndAnalytics = _a.marketingAndAnalytics, advertising = _a.advertising, functional = _a.functional, customCategories = _a.customCategories;\n            e.preventDefault();\n            // Safe guard against browsers that don't prevent the\n            // submission of invalid forms (Safari < 10.1)\n            if (!customCategories &&\n                (marketingAndAnalytics === null || advertising === null || functional === null)) {\n                return;\n            }\n            // Safe guard against custom categories being null\n            if (customCategories &&\n                Object.keys(customCategories).some(function (category) { return preferences[category] === null; })) {\n                return;\n            }\n            onSave();\n        };\n        return _this;\n    }\n    PreferenceDialog.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, innerRef = _a.innerRef, onCancel = _a.onCancel, marketingDestinations = _a.marketingDestinations, advertisingDestinations = _a.advertisingDestinations, functionalDestinations = _a.functionalDestinations, marketingAndAnalytics = _a.marketingAndAnalytics, advertising = _a.advertising, functional = _a.functional, customCategories = _a.customCategories, destinations = _a.destinations, title = _a.title, content = _a.content, preferences = _a.preferences;\n        var buttons = (React.createElement(\"div\", null,\n            React.createElement(DefaultButton, { type: \"button\", onClick: onCancel }, \"Cancel\"),\n            React.createElement(GreenButton, { type: \"submit\" }, \"Save\")));\n        return (React.createElement(Dialog, { innerRef: innerRef, title: title, buttons: buttons, onCancel: onCancel, onSubmit: this.handleSubmit },\n            content,\n            React.createElement(TableScroll, null,\n                React.createElement(Table, null,\n                    React.createElement(\"thead\", null,\n                        React.createElement(Row, null,\n                            React.createElement(ColumnHeading, { scope: \"col\" }, \"Allow\"),\n                            React.createElement(ColumnHeading, { scope: \"col\" }, \"Category\"),\n                            React.createElement(ColumnHeading, { scope: \"col\" }, \"Purpose\"),\n                            React.createElement(ColumnHeading, { scope: \"col\", className: hideOnMobile }, \"Tools\"))),\n                    React.createElement(\"tbody\", null,\n                        !customCategories && (React.createElement(React.Fragment, null,\n                            React.createElement(Row, null,\n                                React.createElement(InputCell, null,\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"functional\", value: \"true\", checked: functional === true, onChange: this.handleChange, \"aria-label\": \"Allow functional tracking\", required: true }),\n                                        ' ',\n                                        \"Yes\"),\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"functional\", value: \"false\", checked: functional === false, onChange: this.handleChange, \"aria-label\": \"Disallow functional tracking\", required: true }),\n                                        ' ',\n                                        \"No\")),\n                                React.createElement(RowHeading, { scope: \"row\" }, \"Functional\"),\n                                React.createElement(\"td\", null,\n                                    React.createElement(\"p\", null, \"To monitor the performance of our site and to enhance your browsing experience.\"),\n                                    React.createElement(\"p\", { className: hideOnMobile }, \"For example, these tools enable you to communicate with us via live chat.\")),\n                                React.createElement(\"td\", { className: hideOnMobile }, functionalDestinations.map(function (d) { return d.name; }).join(', '))),\n                            React.createElement(Row, null,\n                                React.createElement(InputCell, null,\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"marketingAndAnalytics\", value: \"true\", checked: marketingAndAnalytics === true, onChange: this.handleChange, \"aria-label\": \"Allow marketing and analytics tracking\", required: true }),\n                                        ' ',\n                                        \"Yes\"),\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"marketingAndAnalytics\", value: \"false\", checked: marketingAndAnalytics === false, onChange: this.handleChange, \"aria-label\": \"Disallow marketing and analytics tracking\", required: true }),\n                                        ' ',\n                                        \"No\")),\n                                React.createElement(RowHeading, { scope: \"row\" }, \"Marketing and Analytics\"),\n                                React.createElement(\"td\", null,\n                                    React.createElement(\"p\", null, \"To understand user behavior in order to provide you with a more relevant browsing experience or personalize the content on our site.\"),\n                                    React.createElement(\"p\", { className: hideOnMobile }, \"For example, we collect information about which pages you visit to help us present more relevant information.\")),\n                                React.createElement(\"td\", { className: hideOnMobile }, marketingDestinations.map(function (d) { return d.name; }).join(', '))),\n                            React.createElement(Row, null,\n                                React.createElement(InputCell, null,\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"advertising\", value: \"true\", checked: advertising === true, onChange: this.handleChange, \"aria-label\": \"Allow advertising tracking\", required: true }),\n                                        ' ',\n                                        \"Yes\"),\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"advertising\", value: \"false\", checked: advertising === false, onChange: this.handleChange, \"aria-label\": \"Disallow advertising tracking\", required: true }),\n                                        ' ',\n                                        \"No\")),\n                                React.createElement(RowHeading, { scope: \"row\" }, \"Advertising\"),\n                                React.createElement(\"td\", null,\n                                    React.createElement(\"p\", null, \"To personalize and measure the effectiveness of advertising on our site and other websites.\"),\n                                    React.createElement(\"p\", { className: hideOnMobile }, \"For example, we may serve you a personalized ad based on the pages you visit on our site.\")),\n                                React.createElement(\"td\", { className: hideOnMobile }, advertisingDestinations.map(function (d) { return d.name; }).join(', '))))),\n                        customCategories &&\n                            Object.entries(customCategories).map(function (_a) {\n                                var categoryName = _a[0], _b = _a[1], integrations = _b.integrations, purpose = _b.purpose;\n                                return (React.createElement(Row, { key: categoryName },\n                                    React.createElement(InputCell, null,\n                                        React.createElement(\"label\", null,\n                                            React.createElement(\"input\", { type: \"radio\", name: categoryName, value: \"true\", checked: preferences[categoryName] === true, onChange: _this.handleChange, \"aria-label\": \"Allow \\\"\" + categoryName + \"\\\" tracking\", required: true }),\n                                            ' ',\n                                            \"Yes\"),\n                                        React.createElement(\"label\", null,\n                                            React.createElement(\"input\", { type: \"radio\", name: categoryName, value: \"false\", checked: preferences[categoryName] === false, onChange: _this.handleChange, \"aria-label\": \"Disallow \\\"\" + categoryName + \"\\\" tracking\", required: true }),\n                                            ' ',\n                                            \"No\")),\n                                    React.createElement(RowHeading, { scope: \"row\" }, categoryName),\n                                    React.createElement(\"td\", null,\n                                        React.createElement(\"p\", null, purpose)),\n                                    React.createElement(\"td\", { className: hideOnMobile }, destinations\n                                        .filter(function (d) { return integrations.includes(d.id); })\n                                        .map(function (d) { return d.name; })\n                                        .join(', '))));\n                            }),\n                        React.createElement(Row, null,\n                            React.createElement(\"td\", null, \"N/A\"),\n                            React.createElement(RowHeading, { scope: \"row\" }, \"Essential\"),\n                            React.createElement(\"td\", null,\n                                React.createElement(\"p\", null, \"We use browser cookies that are necessary for the site to work as intended.\"),\n                                React.createElement(\"p\", null, \"For example, we store your website data collection preferences so we can honor them if you return to our site. You can disable these cookies in your browser settings but if you do the site may not work as intended.\")),\n                            React.createElement(\"td\", { className: hideOnMobile })))))));\n    };\n    PreferenceDialog.displayName = 'PreferenceDialog';\n    PreferenceDialog.defaultProps = {\n        marketingAndAnalytics: null,\n        advertising: null,\n        functional: null\n    };\n    return PreferenceDialog;\n}(PureComponent));\nexport default PreferenceDialog;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { PureComponent } from 'react';\nimport Dialog from './dialog';\nimport { DefaultButton, RedButton } from './buttons';\nvar CancelDialog = /** @class */ (function (_super) {\n    __extends(CancelDialog, _super);\n    function CancelDialog() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleSubmit = function (e) {\n            var onConfirm = _this.props.onConfirm;\n            e.preventDefault();\n            onConfirm();\n        };\n        _this.handleEsc = function (e) {\n            var onConfirm = _this.props.onConfirm;\n            // Esc key\n            if (e.keyCode === 27) {\n                onConfirm();\n            }\n        };\n        return _this;\n    }\n    CancelDialog.prototype.render = function () {\n        var _a = this.props, innerRef = _a.innerRef, onBack = _a.onBack, title = _a.title, content = _a.content;\n        var buttons = (React.createElement(\"div\", null,\n            React.createElement(DefaultButton, { type: \"button\", onClick: onBack }, \"Go Back\"),\n            React.createElement(RedButton, { type: \"submit\" }, \"Yes, Cancel\")));\n        return (React.createElement(Dialog, { innerRef: innerRef, title: title, buttons: buttons, onSubmit: this.handleSubmit, width: \"500px\" }, content));\n    };\n    CancelDialog.prototype.componentDidMount = function () {\n        document.body.addEventListener('keydown', this.handleEsc, false);\n    };\n    CancelDialog.prototype.componentWillUnmount = function () {\n        document.body.removeEventListener('keydown', this.handleEsc, false);\n    };\n    CancelDialog.displayName = 'CancelDialog';\n    return CancelDialog;\n}(PureComponent));\nexport default CancelDialog;\n","import EventEmitter from 'events';\nimport React from 'react';\nimport Banner from './banner';\nimport PreferenceDialog from './preference-dialog';\nimport CancelDialog from './cancel-dialog';\nimport { ADVERTISING_CATEGORIES, FUNCTIONAL_CATEGORIES } from './categories';\nvar emitter = new EventEmitter();\nexport function openDialog() {\n    emitter.emit('openDialog');\n}\nfunction normalizeDestinations(destinations) {\n    var marketingDestinations = [];\n    var advertisingDestinations = [];\n    var functionalDestinations = [];\n    var _loop_1 = function (destination) {\n        if (ADVERTISING_CATEGORIES.find(function (c) { return c === destination.category; })) {\n            advertisingDestinations.push(destination);\n        }\n        else if (FUNCTIONAL_CATEGORIES.find(function (c) { return c === destination.category; })) {\n            functionalDestinations.push(destination);\n        }\n        else {\n            // Fallback to marketing\n            marketingDestinations.push(destination);\n        }\n    };\n    for (var _i = 0, destinations_1 = destinations; _i < destinations_1.length; _i++) {\n        var destination = destinations_1[_i];\n        _loop_1(destination);\n    }\n    return { marketingDestinations: marketingDestinations, advertisingDestinations: advertisingDestinations, functionalDestinations: functionalDestinations };\n}\nvar Container = function (props) {\n    var _a = React.useState(false || (props.workspaceAddedNewDestinations && props.defaultDestinationBehavior === 'ask')), isDialogOpen = _a[0], toggleDialog = _a[1];\n    var _b = React.useState(true), showBanner = _b[0], toggleBanner = _b[1];\n    var _c = React.useState(false), isCancelling = _c[0], toggleCancel = _c[1];\n    var banner = React.useRef(null);\n    var preferenceDialog = React.useRef(null);\n    var cancelDialog = React.useRef(null);\n    var _d = normalizeDestinations(props.destinations), marketingDestinations = _d.marketingDestinations, advertisingDestinations = _d.advertisingDestinations, functionalDestinations = _d.functionalDestinations;\n    var handleBodyClick = function (e) {\n        // Do nothing if no new implicit consent needs to be saved\n        if (!props.isConsentRequired ||\n            !props.implyConsentOnInteraction ||\n            props.newDestinations.length === 0) {\n            return;\n        }\n        // Ignore propogated clicks from inside the consent manager\n        if ((banner.current && banner.current.contains(e.target)) ||\n            (preferenceDialog.current && preferenceDialog.current.contains(e.target)) ||\n            (cancelDialog.current && cancelDialog.current.contains(e.target))) {\n            return;\n        }\n        props.saveConsent(undefined, false);\n    };\n    var showDialog = function () { return toggleDialog(true); };\n    React.useEffect(function () {\n        emitter.on('openDialog', showDialog);\n        if (props.isConsentRequired && props.implyConsentOnInteraction) {\n            document.body.addEventListener('click', handleBodyClick, false);\n        }\n        return function () {\n            emitter.removeListener('openDialog', showDialog);\n            document.body.removeEventListener('click', handleBodyClick, false);\n        };\n    });\n    React.useEffect(function () {\n        if (isDialogOpen) {\n            props.resetPreferences();\n        }\n    }, [isDialogOpen]);\n    var onClose = function () {\n        if (props.closeBehavior === undefined || props.closeBehavior === \"dismiss\" /* DISMISS */) {\n            return toggleBanner(false);\n        }\n        if (props.closeBehavior === \"accept\" /* ACCEPT */) {\n            return props.saveConsent();\n        }\n        if (props.closeBehavior === \"deny\" /* DENY */) {\n            var falsePreferences = Object.keys(props.preferences).reduce(function (acc, category) {\n                acc[category] = false;\n                return acc;\n            }, {});\n            props.setPreferences(falsePreferences);\n            return props.saveConsent();\n        }\n        // closeBehavior is a custom function\n        var customClosePreferences = props.closeBehavior(props.preferences);\n        props.setPreferences(customClosePreferences);\n        props.saveConsent();\n        return toggleBanner(false);\n    };\n    var handleCategoryChange = function (category, value) {\n        var _a;\n        props.setPreferences((_a = {},\n            _a[category] = value,\n            _a));\n    };\n    var handleSave = function () {\n        toggleDialog(false);\n        props.saveConsent();\n    };\n    var handleCancel = function () {\n        // Only show the cancel confirmation if there's unconsented destinations\n        if (props.newDestinations.length > 0) {\n            toggleCancel(true);\n        }\n        else {\n            toggleDialog(false);\n            props.resetPreferences();\n        }\n    };\n    var handleCancelBack = function () {\n        toggleCancel(false);\n    };\n    var handleCancelConfirm = function () {\n        toggleCancel(false);\n        toggleDialog(false);\n        props.resetPreferences();\n    };\n    return (React.createElement(\"div\", null,\n        showBanner && props.isConsentRequired && props.newDestinations.length > 0 && (React.createElement(Banner, { innerRef: function (current) { return (banner = { current: current }); }, onClose: onClose, onChangePreferences: function () { return toggleDialog(true); }, content: props.bannerContent, subContent: props.bannerSubContent, textColor: props.bannerTextColor, backgroundColor: props.bannerBackgroundColor })),\n        isDialogOpen && (React.createElement(PreferenceDialog, { customCategories: props.customCategories, destinations: props.destinations, preferences: props.preferences, innerRef: function (current) { return (preferenceDialog = { current: current }); }, onCancel: handleCancel, onSave: handleSave, onChange: handleCategoryChange, marketingDestinations: marketingDestinations, advertisingDestinations: advertisingDestinations, functionalDestinations: functionalDestinations, marketingAndAnalytics: props.preferences.marketingAndAnalytics, advertising: props.preferences.advertising, functional: props.preferences.functional, title: props.preferencesDialogTitle, content: props.preferencesDialogContent })),\n        isCancelling && (React.createElement(CancelDialog, { innerRef: function (current) { return (cancelDialog = { current: current }); }, onBack: handleCancelBack, onConfirm: handleCancelConfirm, title: props.cancelDialogTitle, content: props.cancelDialogContent }))));\n};\nexport default Container;\n","import { configure } from '@storybook/react'\n\nconfigure(require.context('../stories', true, /\\.stories\\.tsx$/), module)\n","import React from 'react';\nexport var bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nexport var bannerSubContent = 'You can manage your preferences here!';\nexport var preferencesDialogTitle = 'Website Data Collection Preferences';\nexport var preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nexport var cancelDialogTitle = 'Are you sure you want to cancel?';\nexport var cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\n","var map = {\n\t\"./0-consent-manager.stories.tsx\": 783,\n\t\"./0.1-consent-manager-close-interaction.stories.tsx\": 1060,\n\t\"./1-standalone.stories.tsx\": 1061,\n\t\"./1.1-standalone-custom.stories.tsx\": 1062,\n\t\"./2-category-based.stories.tsx\": 1063,\n\t\"./3-tool-based.stories.tsx\": 1064,\n\t\"./4-custom-consent.stories.tsx\": 1065,\n\t\"./5-custom-categories.stories.tsx\": 1066,\n\t\"./6-ccpa-gdpr-example.stories.tsx\": 1067,\n\t\"./7-default-destination-behavior.stories.tsx\": 1073\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 782;","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/pooya.jaferian/dev/src/github.com/segmentio/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport cookies from 'js-cookie'\\nimport { Pane, Heading, Button } from 'evergreen-ui'\\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src'\\nimport { storiesOf } from '@storybook/react'\\nimport { CloseBehavior, CloseBehaviorFunction } from '../src/consent-manager/container'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { Preferences } from '../src/types'\\nimport CookieView from './components/CookieView'\\n\\nconst bannerContent = (\\n  <span>\\n    We use cookies (and other similar technologies) to collect data to improve your experience on\\n    our site. By using our website, youre agreeing to the collection of data as described in our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </span>\\n)\\nconst bannerSubContent = 'You can manage your preferences here!'\\nconst preferencesDialogTitle = 'Website Data Collection Preferences'\\nconst preferencesDialogContent = (\\n  <div>\\n    <p>\\n      Segment uses data collected by cookies and JavaScript libraries to improve your browsing\\n      experience, analyze site traffic, deliver personalized advertisements, and increase the\\n      overall performance of our site.\\n    </p>\\n    <p>\\n      By using our website, youre agreeing to our{' '}\\n      <a\\n        href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noopener noreferrer\\\"\\n      >\\n        Website Data Collection Policy\\n      </a>\\n      .\\n    </p>\\n    <p>\\n      The table below outlines how we use this data by category. To opt out of a category of data\\n      collection, select No and save your preferences.\\n    </p>\\n  </div>\\n)\\nconst cancelDialogTitle = 'Are you sure you want to cancel?'\\nconst cancelDialogContent = (\\n  <div>\\n    Your preferences have not been saved. By continuing to use our website, youre agreeing to our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </div>\\n)\\n\\nconst ConsentManagerExample = (props: { closeBehavior: CloseBehavior | CloseBehaviorFunction }) => {\\n  const [prefs, updatePrefs] = React.useState<Preferences>(loadPreferences())\\n\\n  const cleanup = onPreferencesSaved(preferences => {\\n    updatePrefs(preferences)\\n  })\\n\\n  React.useEffect(() => {\\n    return () => {\\n      cleanup()\\n    }\\n  })\\n\\n  return (\\n    <Pane>\\n      <ConsentManager\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        otherWriteKeys={['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l']}\\n        bannerContent={bannerContent}\\n        bannerSubContent={bannerSubContent}\\n        preferencesDialogTitle={preferencesDialogTitle}\\n        preferencesDialogContent={preferencesDialogContent}\\n        cancelDialogTitle={cancelDialogTitle}\\n        cancelDialogContent={cancelDialogContent}\\n        closeBehavior={props.closeBehavior}\\n      />\\n\\n      <Pane marginX={100} marginTop={20}>\\n        <Heading> Your website content </Heading>\\n        <Pane display=\\\"flex\\\">\\n          <iframe\\n            src=\\\"https://giphy.com/embed/JIX9t2j0ZTN9S\\\"\\n            width=\\\"480\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n\\n          <iframe\\n            src=\\\"https://giphy.com/embed/yFQ0ywscgobJK\\\"\\n            width=\\\"398\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n        </Pane>\\n\\n        <p>\\n          <div>\\n            <Heading>Current Preferences</Heading>\\n            <SyntaxHighlighter language=\\\"json\\\" style={docco}>\\n              {JSON.stringify(prefs, null, 2)}\\n            </SyntaxHighlighter>\\n          </div>\\n          <Button marginRight={20} onClick={openConsentManager}>\\n            Change Cookie Preferences\\n          </Button>\\n          <Button\\n            onClick={() => {\\n              cookies.remove('tracking-preferences')\\n              window.location.reload()\\n            }}\\n          >\\n            Clear\\n          </Button>\\n        </p>\\n      </Pane>\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('React Component / OnClose interactions', module)\\n  .add(`Dismiss`, () => <ConsentManagerExample closeBehavior={CloseBehavior.DISMISS} />)\\n  .add(`Accept`, () => <ConsentManagerExample closeBehavior={CloseBehavior.ACCEPT} />)\\n  .add(`Deny`, () => <ConsentManagerExample closeBehavior={CloseBehavior.DENY} />)\\n  .add(`Custom Close Behavior`, () => (\\n    <ConsentManagerExample\\n      closeBehavior={categories => ({\\n        ...categories,\\n        advertising: false\\n      })}\\n    />\\n  ))\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/0-consent-manager.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport cookies from 'js-cookie';\nimport { Pane, Heading, Button } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src';\nimport { storiesOf } from '@storybook/react';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport CookieView from './components/CookieView';\nvar bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar bannerSubContent = 'You can manage your preferences here!';\nvar preferencesDialogTitle = 'Website Data Collection Preferences';\nvar preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nvar cancelDialogTitle = 'Are you sure you want to cancel?';\nvar cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar ConsentManagerExample = function (props) {\n    var _a = React.useState(loadPreferences()), prefs = _a[0], updatePrefs = _a[1];\n    var cleanup = onPreferencesSaved(function (preferences) {\n        updatePrefs(preferences);\n    });\n    React.useEffect(function () {\n        return function () {\n            cleanup();\n        };\n    });\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'], bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, closeBehavior: props.closeBehavior }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Your website content \"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/JIX9t2j0ZTN9S\", width: \"480\", height: \"480\", frameBorder: \"0\" }),\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(\"p\", null,\n                React.createElement(\"div\", null,\n                    React.createElement(Heading, null, \"Current Preferences\"),\n                    React.createElement(SyntaxHighlighter, { language: \"json\", style: docco }, JSON.stringify(prefs, null, 2))),\n                React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n                React.createElement(Button, { onClick: function () {\n                        cookies.remove('tracking-preferences');\n                        window.location.reload();\n                    } }, \"Clear\"))),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('React Component / OnClose interactions', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__))\n    .add(\"Dismiss\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"dismiss\" /* DISMISS */ }); })\n    .add(\"Accept\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"accept\" /* ACCEPT */ }); })\n    .add(\"Deny\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"deny\" /* DENY */ }); })\n    .add(\"Custom Close Behavior\", function () { return (React.createElement(ConsentManagerExample, { closeBehavior: function (categories) { return (__assign(__assign({}, categories), { advertising: false })); } })); });\n"],"sourceRoot":""}